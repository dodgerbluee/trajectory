/* ============================================================================
   Reset and Base Styles
   ============================================================================ */

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Shared summary section used across vaccines, documents, visits, illnesses */
.summary-section {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-md);
}
.summary-section .summary-items {
  display: flex;
  gap: var(--spacing-lg);
  align-items: center;
}
.summary-section .summary-item {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}
.summary-section .summary-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}
.summary-section .summary-value {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}
.summary-section .summary-children {
  margin-left: auto;
}

/* Family role badges */
.role-badge {
  display: inline-block;
  padding: 0.2em 0.5em;
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  border-radius: var(--radius-sm);
  text-transform: capitalize;
}
.role-badge--owner {
  background: var(--color-primary);
  color: var(--color-text-inverse, #fff);
}
.role-badge--parent {
  background: var(--color-surface);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border);
}
.role-badge--read-only {
  background: var(--color-surface);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
}

/* Modern summary card used for documents and vaccines */
.summary-card-modern {
  display: flex;
  align-items: center;
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: 12px 16px;
  box-shadow: var(--shadow-sm);
  gap: 16px;
}
.summary-card-modern .summary-card-content {
  display: grid;
  grid-template-columns: 1fr 320px;
  gap: 16px;
  align-items: center;
}
.summary-card-title {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

/* Vision refraction styles */
.vision-refraction-card {
  border: 1px solid rgba(0,0,0,0.06);
  border-radius: 12px;
  padding: 14px;
  box-shadow: 0 6px 18px rgba(21, 30, 45, 0.04);
}
.vision-refraction-header {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}
.vision-refraction-header h3 {
  font-size: 1rem;
  margin: 0;
}
.refraction-sub {
  font-size: 0.825rem;
  color: var(--color-text-secondary);
  margin-left: auto;
}
.refraction-grid {
  display: grid;
  grid-template-columns: 80px repeat(3, 1fr);
  gap: 10px;
  align-items: center;
}
.col-label {
  font-size: 0.825rem;
  color: var(--color-text-secondary);
  padding-left: 8px;
}
.eye-label {
  font-weight: 700;
  color: var(--color-text-primary);
  padding-left: 8px;
}
.refraction-input {
  width: 100%;
  padding: 8px 10px;
  border-radius: 8px;
  border: 1px solid rgba(16,24,40,0.08);
  background: var(--color-background);
  transition: box-shadow 0.12s ease, border-color 0.12s ease;
}
.refraction-input:focus {
  outline: none;
  border-color: rgba(124, 58, 237, 0.9);
  box-shadow: 0 6px 18px rgba(124,58,237,0.08);
}
.refraction-textarea {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid rgba(16,24,40,0.06);
  resize: vertical;
}
.refraction-notes {
  margin-top: 12px;
}

.vision-refraction-card .visually-hidden {
  position: absolute !important;
  height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px);
}

@media (max-width: 720px) {
  .refraction-grid { grid-template-columns: 64px repeat(3, 1fr); gap: 8px; }
  .refraction-sub { display: none; }
}
.summary-card-stats {
  display: flex;
  gap: 20px;
  align-items: center;
}
.summary-card-grid {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(80px, 1fr);
  gap: 20px;
  align-items: center;
}
.summary-card-stat {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}
.summary-card-stat .summary-card-stat-value {
  font-weight: var(--font-weight-semibold);
}

/* Visit stat cards grid */
.visit-stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.visit-stat-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  border-radius: 12px;
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  cursor: pointer;
  text-align: left;
}
.visit-stat-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.08);
}
/* Match child filter selected state */
.visit-stat-card.active {
  background: linear-gradient(90deg, rgba(96,165,250,0.14), rgba(59,130,246,0.06));
  border-color: rgba(59,130,246,0.12);
  box-shadow: 0 6px 18px rgba(12,18,30,0.12);
}

/* Compact/Sidebar variant for VisitStats (used when `vertical` is true)
   Makes sidebar stat buttons smaller and visually distinct from main stats */
.visit-stats-vertical .visit-stat-card {
  padding: 8px;
  border-radius: 10px;
  gap: 8px;
  align-items: center;
}
.visit-stats-vertical .visit-stat-card:hover {
  transform: translateY(-4px);
}

/* Vaccine sidebar: info-only stats (no filter, no hover lift) */
.vaccine-sidebar--info .visit-stat-card {
  cursor: default;
}
.vaccine-sidebar--info .visit-stat-card:hover {
  transform: none;
}

.visit-stats-vertical .visit-stat-icon {
  width: 36px;
  height: 36px;
  border-radius: 8px;
}
.visit-stats-vertical .visit-stat-icon-svg {
  width: 16px;
  height: 16px;
}
.visit-stats-vertical .visit-stat-value {
  font-size: 1rem;
}
.visit-stats-vertical .visit-stat-label {
  font-size: 0.75rem;
  color: var(--color-text-secondary);
}
/* Match child filter selected state: same gradient and box-shadow as .child-row.active */
.visit-stats-vertical .visit-stat-card.active {
  background: linear-gradient(90deg, rgba(96,165,250,0.14), rgba(59,130,246,0.06));
  border-color: rgba(59,130,246,0.12);
  box-shadow: 0 6px 18px rgba(12,18,30,0.12);
}

.visit-stat-icon {
  width: 44px;
  height: 44px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.visit-stat-icon-svg {
  width: 20px;
  height: 20px;
  color: white;
}

.visit-stat-body {
  display: flex;
  flex-direction: column;
}
.visit-stat-value {
  font-size: 1.125rem;
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}
.visit-stat-label {
  font-size: 0.75rem;
  color: var(--color-text-secondary);
}

/* Color accents */
.visit-stat-card[data-color="blue"] .visit-stat-icon { background: linear-gradient(135deg, #60a5fa, #3b82f6); }
.visit-stat-card[data-color="emerald"] .visit-stat-icon { background: linear-gradient(135deg, #34d399, #10b981); }
.visit-stat-card[data-color="red"] .visit-stat-icon { background: linear-gradient(135deg, #f87171, #ef4444); }
.visit-stat-card[data-color="yellow"] .visit-stat-icon { background: linear-gradient(135deg, #fbbf24, #f59e0b); }
.visit-stat-card[data-color="purple"] .visit-stat-icon { background: linear-gradient(135deg, #a78bfa, #7c3aed); }
.visit-stat-card[data-color="gray"] .visit-stat-icon { background: linear-gradient(135deg, #d1d5db, #9ca3af); }

@media(min-width: 768px) {
  .visit-stats-grid { grid-template-columns: repeat(5, 1fr); }
}

/* Inline Add Visit animated button (used in visits filters) */
.add-visit-animated {
  padding: 0.55rem 0.9rem;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: #fff;
  background: linear-gradient(90deg, var(--color-primary-500), var(--color-primary));
  box-shadow: 0 10px 24px rgba(59,130,246,0.16);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast), filter var(--transition-fast);
}
.add-visit-animated:hover {
  transform: translateY(-4px);
  box-shadow: 0 16px 34px rgba(59,130,246,0.2);
  filter: brightness(1.03);
}
.add-visit-animated .btn-icon {
  width: 18px;
  height: 18px;
  transition: transform var(--transition-fast);
}
.add-visit-animated:hover .btn-icon {
  transform: translateY(-2px) rotate(12deg);
}

/* Floating Action Button */
.fab {
  position: fixed;
  /* Align to the right edge of the centered content-wrapper (max-width: 1600px).
     When the viewport is narrower than the content max, fall back to the viewport edge. */
  right: calc(max((100% - 1600px)/2, 0px) + 24px);
  bottom: 24px;
  z-index: var(--z-fixed);
}
.fab-btn {
  padding: 0.65rem 1rem;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: #fff;
  background: linear-gradient(90deg, var(--color-primary-500), var(--color-primary));
  box-shadow: 0 12px 30px rgba(59,130,246,0.18);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast), filter var(--transition-fast);
}
.fab-btn:hover {
  transform: translateY(-6px);
  box-shadow: 0 18px 36px rgba(59,130,246,0.22);
  filter: brightness(1.02);
}
.fab-icon {
  width: 20px;
  height: 20px;
  transition: transform var(--transition-fast);
}
.fab-btn:hover .fab-icon {
  transform: translateY(-3px) rotate(12deg);
}

@media (max-width: 640px) {
  .fab { right: 16px; bottom: 16px; }
}

/* Visits summary header layout */
.summary-card-header {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 8px 12px;
}
.summary-card-title {
  font-size: 1.125rem;
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin-right: auto;
}
.summary-card-controls {
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Top row above the summary card */
.visits-top-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.visits-top-title {
  font-size: 1.25rem;
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.visits-top-actions {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 8px;
}

.summary-card-children {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 320px;
  justify-self: end;
}

/* Right-align filters inside the centered summary card for visits and illnesses */
.visits-summary .summary-card-children,
.illnesses-summary .summary-card-children {
  /* handled by justify-self on .summary-card-children */
}

.visits-summary .filters-inline {
  display: flex;
  gap: 12px;
  align-items: center;
}

/* Illnesses summary should match visits layout for filters */
.illnesses-summary .filters-inline {
  display: flex;
  gap: 12px;
  align-items: center;
}

.illnesses-summary .filters-grid {
  display: flex;
  gap: 12px;
  align-items: center;
}

.visits-summary .filters-grid {
  display: flex;
  gap: 12px;
  align-items: center;
}

.visits-summary .filter-group label {
  display: block;
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.visits-summary .filter-group select {
  padding: 6px 8px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
  background: var(--color-background-card);
}

.visits-summary .filters-actions .btn-icon {
  margin-right: 8px;
}

/* Segmented control */
.segmented-control {
  display: inline-flex;
  gap: 6px;
  background: transparent;
}

.segmented-control-item {
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-background-card);
  cursor: pointer;
  font-size: 0.875rem;
}

.segmented-control-item.active {
  background: linear-gradient(90deg, rgba(59,130,246,0.12), rgba(59,130,246,0.04));
  border-color: rgba(59,130,246,0.4);
}

/* Child pills */
.child-pills {
  display: flex;
  align-items: center;
  gap: 12px;
}

.pills-list {
  display: flex;
  gap: 8px;
  align-items: center;
}

.pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-background-card);
  cursor: pointer;
  font-size: 0.875rem;
}

.pill.active {
  background: linear-gradient(90deg, rgba(16,185,129,0.12), rgba(59,130,246,0.04));
  border-color: rgba(59,130,246,0.3);
}
.pill-avatar {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  object-fit: cover;
}
.all-avatars {
  display: inline-flex;
  align-items: center;
  height: 28px;
  margin-right: 6px;
}
.all-avatar-item {
  display: inline-block;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--color-background-card);
  box-shadow: 0 4px 8px rgba(0,0,0,0.06);
  background: var(--color-background-card);
}
.pill-label { font-size: 0.85rem; }
.child-combobox .combobox-input {
  padding: 6px 8px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
  background: var(--color-background-card);
}
.summary-card-stat {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}
.summary-card-stat-value {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}
.summary-card-stat-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

@media (prefers-color-scheme: dark) {
  .summary-card-modern {
    background: var(--color-background-card);
    border-color: var(--color-border);
  }
}
:root {
  /* Colors */
  /* Primary */
  --color-primary: #2563eb;
  --color-primary-hover: #1d4ed8;
  --color-primary-light: #dbeafe;
  --color-primary-50: #eff6ff;
  --color-primary-100: #dbeafe;
  --color-primary-500: #3b82f6;
  --color-primary-600: #2563eb;
  --color-primary-700: #1d4ed8;
  --color-primary-900: #1e3a8a;
  /* Accent for visit pills (navy) */
  --color-visit-accent: #0b3d91;
  --color-visit-accent-2: #0f4bb3;
  
  /* Secondary Colors */
  --color-secondary: #64748b;
  --color-secondary-hover: #475569;
  
  /* Semantic Colors */
  --color-success: #10b981;
  --color-success-light: #d1fae5;
  --color-warning: #f59e0b;
  --color-warning-light: #fef3c7;
  /* Vision (purple) */
  --color-vision: #7c3aed;
  --color-vision-light: rgba(124, 58, 237, 0.08);
  --color-info: #06b6d4;
  --color-info-light: #cffafe;
  --color-danger: #ef4444;
  --color-danger-hover: #dc2626;
  --color-danger-light: #fee2e2;
  
  /* Neutral Grays */
  --color-gray-50: #f9fafb;
  --color-gray-100: #f3f4f6;
  --color-gray-200: #e5e7eb;
  --color-gray-300: #d1d5db;
  --color-gray-400: #9ca3af;
  --color-gray-500: #6b7280;
  --color-gray-600: #4b5563;
  --color-gray-700: #374151;
  --color-gray-800: #1f2937;
  --color-gray-900: #111827;
  
  /* Background Colors (Light Mode) */
  --color-background: #f5f5f5;
  --color-background-card: #ffffff;
  --entry-background-color: #f0f0f0;
  --color-surface: #f8fafc;
  --color-border: #e2e8f0;
  
  /* Text Colors (Light Mode) */
  --color-text-primary: #0f172a;
  --color-text-secondary: #64748b;
  
  /* Typography */
  --font-size-xs: 0.75rem;    /* 12px */
  --font-size-sm: 0.875rem;   /* 14px */
  --font-size-base: 1rem;     /* 16px */
  --font-size-lg: 1.125rem;   /* 18px */
  --font-size-xl: 1.25rem;    /* 20px */
  --font-size-2xl: 1.5rem;    /* 24px */
  --font-size-3xl: 1.875rem;  /* 30px */
  --font-size-4xl: 2.25rem;   /* 36px */
  
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  
  --line-height-tight: 1.25;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.75;
  
  /* Spacing */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  --spacing-2xl: 3rem;
  
  /* === Border Radius === */
  --radius-sm: 0.25rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-full: 9999px;
  
  /* === Elevation System === */
  --elevation-0: none;
  --elevation-1: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --elevation-2: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  --elevation-3: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --elevation-4: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --elevation-5: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  
  /* Shadow support */
  --shadow-sm: var(--elevation-1);
  --shadow-md: var(--elevation-3);
  --shadow-lg: var(--elevation-4);
  
  /* === Transitions === */
  --transition-fast: 150ms ease-in-out;
  --transition-base: 200ms ease-in-out;
  --transition-slow: 300ms ease-in-out;
  
  /* === Z-Index Scale === */
  --z-base: 0;
  --z-dropdown: 1000;
  --z-sticky: 1020;
  --z-fixed: 1030;
  --z-modal-backdrop: 1040;
  --z-modal: 1050;
  --z-popover: 1060;
  --z-tooltip: 1070;
  
  /* === Font Family === */
  --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
}

/* Dark Mode Variables - Professional Modern Theme */
[data-theme="dark"] {
  /* Background Colors - Deep dark greys with subtle elevation */
  --color-background: #0a0a0a;
  --color-background-card: #121212;
  --entry-background-color: #0f0f0f;
  --color-surface: #1a1a1a;
  --color-border: #2a2a2a;
  
  /* Text Colors - High contrast for readability */
  --color-text-primary: #ffffff;
  --color-text-secondary: #a0a0a0;
  
  /* Primary Colors - Vibrant modern blue that pops */
  --color-primary: #3b82f6;
  --color-primary-hover: #60a5fa;
  --color-primary-light: rgba(59, 130, 246, 0.1);
  /* Desaturated accent for clinical/glass UI (no bright solid fills) */
  --color-accent-muted: rgba(96, 165, 250, 0.45);
  --color-accent-muted-fill: rgba(59, 130, 246, 0.08);
  --color-accent-glow: rgba(59, 130, 246, 0.25);
  
  /* Semantic Colors - Modern, vibrant, accessible */
  --color-success: #10b981;
  --color-success-light: rgba(16, 185, 129, 0.15);
  --color-warning: #f59e0b;
  --color-warning-light: rgba(245, 158, 11, 0.15);
  --color-info: #06b6d4;
  --color-info-light: rgba(6, 182, 212, 0.15);
  --color-danger: #ef4444;
  --color-danger-hover: #dc2626;
  --color-danger-light: rgba(239, 68, 68, 0.15);
  
  /* Enhanced Shadows - Deeper, more dramatic for dark mode */
  --elevation-1: 0 1px 3px 0 rgba(0, 0, 0, 0.5), 0 1px 2px 0 rgba(0, 0, 0, 0.4);
  --elevation-2: 0 3px 6px -1px rgba(0, 0, 0, 0.5), 0 2px 4px -1px rgba(0, 0, 0, 0.4);
  --elevation-3: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.4);
  --elevation-4: 0 20px 25px -5px rgba(0, 0, 0, 0.6), 0 10px 10px -5px rgba(0, 0, 0, 0.4);
  --elevation-5: 0 25px 50px -12px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(255, 255, 255, 0.05);
  
  --shadow-sm: var(--elevation-1);
  --shadow-md: var(--elevation-3);
  --shadow-lg: var(--elevation-4);
}


/* Smooth theme transitions for specific elements */
body,
.card,
.app-header,
.app-footer,
.btn,
.nav-link {
  transition: background-color var(--transition-base), 
              color var(--transition-base),
              border-color var(--transition-base);
}

html {
  overflow-y: scroll;
}

body {
  font-family: var(--font-family);
  color: var(--color-text-primary);
  background-color: var(--color-background);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  width: 100%;
  overflow-x: hidden;
}

/* Ensure dark mode color scheme is applied */
[data-theme="dark"] {
  color-scheme: dark;
}

/* Dark Mode Enhancements - Modern Professional Theme */
[data-theme="dark"] .card {
  background-color: var(--color-background-card);
  border-color: var(--color-border);
  box-shadow: var(--elevation-2);
  transition: box-shadow var(--transition-base), border-color var(--transition-base);
}

[data-theme="dark"] .card:hover {
  box-shadow: var(--elevation-3);
}

[data-theme="dark"] .btn-primary {
  background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-hover) 100%);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
  transition: all var(--transition-base);
}

[data-theme="dark"] .btn-primary:hover:not(:disabled) {
  background: linear-gradient(135deg, var(--color-primary-hover) 0%, var(--color-primary) 100%);
  box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
  transform: translateY(-1px);
}

[data-theme="dark"] .btn-secondary {
  background-color: var(--color-surface);
  border-color: var(--color-border);
  transition: all var(--transition-base);
}

[data-theme="dark"] .btn-secondary:hover:not(:disabled) {
  background-color: var(--color-border);
  border-color: rgba(59, 130, 246, 0.5);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .header-content {
  background-color: var(--color-background-card);
  border-color: var(--color-border);
  box-shadow: var(--elevation-3);
}

[data-theme="dark"] input.form-input:focus,
[data-theme="dark"] textarea.form-input:focus,
[data-theme="dark"] select.form-input:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1), var(--elevation-1);
  outline: none;
}

/* ============================================================================
   Layout Components
   ============================================================================ */

.app-container {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.app-header {
  position: sticky;
  top: var(--spacing-md);
  z-index: 100;
  padding: var(--spacing-md);
  display: flex;
  justify-content: center;
  width: 100%;
}

.header-content {
  max-width: 1600px;
  width: 100%;
  background-color: var(--color-background-card);
  border-radius: var(--radius-lg);
  padding: var(--spacing-sm) var(--spacing-lg);
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: var(--shadow-md);
  border: 1px solid var(--color-border);
  box-sizing: border-box;
}

.header-brand {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  text-decoration: none;
  color: inherit;
  transition: opacity 0.2s ease;
}

.header-brand:hover {
  opacity: 0.8;
}

.app-logo {
  height: 24px;
  width: auto;
  filter: brightness(0);
  object-fit: contain;
  transition: filter var(--transition-base);
}

[data-theme="dark"] .app-logo {
  filter: brightness(0) invert(1);
}

.app-title {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin: 0;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

/* Settings page layout - left sidebar */

/* Page-level wrapper that centers content like HomePage */
.settings-page-grid {
  max-width: 1600px; /* match header/content width */
  margin: 0 auto;
}

.body-header {
  padding-bottom: var(--spacing-md);
}


.settings-card {
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: 0; /* inner grid controls padding */
}

.settings-card-grid {
  display: grid;
  grid-template-columns: 220px 1fr;
  gap: var(--spacing-md);
  align-items: start;
  padding: var(--spacing-md);
}

.settings-card-header {
  grid-column: 1 / -1;
  padding: 0 var(--spacing-md) 0 var(--spacing-md); /* remove top padding to align with other pages */
  /* Separator under header to visually divide title from content */
  border-bottom: 1px solid var(--color-border);
  padding-bottom: var(--spacing-sm);
  margin-bottom: var(--spacing-md);
}

.settings-title {
  margin: 0;
  font-size: var(--font-size-2xl);
}

.settings-save-row {
  display: flex;
  justify-content: flex-end;
  padding: var(--spacing-md) 0 0 0;
}

.settings-sidebar {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

/* Metrics (Trends) page two-column layout aligning subheadings on left */
/* Metrics (Trends) page styles removed (restored to previous state) */

.sidebar-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 10px 12px;
  background: transparent;
  border: none;
  text-align: left;
  color: var(--color-text-primary);
  cursor: pointer;
  border-radius: var(--radius-sm);
}

.sidebar-item.active,
.sidebar-item:hover {
  background: var(--color-primary-light);
}

.sidebar-icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
}

.settings-main {
  display: block;
  flex-direction: column;
  gap: var(--spacing-md);
}

.settings-card-footer {
  display: flex;
  justify-content: flex-end;
  padding: var(--spacing-md);
  border-top: 1px solid var(--color-border);
  background: transparent;
}

/* Illness Notification */
.illness-notification {
  position: relative;
}

.illness-notification-trigger {
  background: none;
  border: none;
  color: var(--color-text-primary);
  cursor: pointer;
  padding: var(--spacing-xs);
  border-radius: var(--radius-md);
  transition: background-color 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  position: relative;
}

.illness-notification-trigger:hover {
  background-color: var(--color-surface);
}

.notification-icon {
  width: 20px;
  height: 20px;
}

.notification-badge {
  position: absolute;
  top: 0;
  right: 0;
  background-color: var(--color-danger);
  color: white;
  border-radius: 50%;
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  font-weight: 600;
  border: 2px solid var(--color-background-card);
}

.illness-notification-dropdown {
  position: absolute;
  top: calc(100% + var(--spacing-xs));
  right: 0;
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  min-width: 320px;
  max-width: 400px;
  max-height: 500px;
  overflow: hidden;
  z-index: 1000;
}

.notification-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-md);
  border-bottom: 1px solid var(--color-border);
}

.notification-header h3 {
  margin: 0;
  font-size: var(--font-size-base);
  font-weight: 600;
  color: var(--color-text-primary);
}

.notification-close {
  background: none;
  border: none;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: var(--spacing-xs);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.2s ease;
}

.notification-close:hover {
  background-color: var(--color-surface);
}

.notification-list {
  max-height: 400px;
  overflow-y: auto;
}

.notification-item {
  display: block;
  padding: var(--spacing-md);
  border-bottom: 1px solid var(--color-border);
  text-decoration: none;
  color: inherit;
  transition: background-color 0.2s ease;
}

.notification-item:hover {
  background-color: var(--color-surface);
}

.notification-item:last-child {
  border-bottom: none;
}

.notification-item-content {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.notification-item-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-sm);
}

.notification-item-details {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.notification-symptoms {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Timeline Filters */
.timeline-filters {
  display: flex;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
  flex-wrap: wrap;
}

.filter-group {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  min-width: 150px;
  padding-left: 50px;
}

.filter-group label {
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
}

/* Timeline List */
/* Modern Timeline Styles - Compact & Uniform */
.timeline-list-modern {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.timeline-item-link {
  text-decoration: none;
  color: inherit;
  display: block;
}

.timeline-item-modern {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  transition: all 0.2s ease;
  cursor: pointer;
  min-height: 56px;
}

.timeline-item-modern:hover {
  background: var(--color-surface);
  border-color: var(--color-primary);
  box-shadow: var(--shadow-sm);
  transform: translateX(2px);
}

.timeline-item-icon {
  flex-shrink: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.125rem;
  line-height: 1;
  /* background: var(--color-surface); */
  border-radius: var(--radius-sm);
}

/* Ensure timeline rows are vertically centered: icon, label and badges */
.timeline-item-main,
.timeline-item-label-row,
.timeline-item-wellness-single-line,
.timeline-item-header-compact {
  align-items: center;
}

/* Keep timeline-item-content using its column layout's default (stretch)
   so children aren't horizontally centered. We only want header rows
   vertically centered. */
.timeline-item-content {
  align-items: stretch;
}

/* Make inline text and filename links align center with icons */
.timeline-item-label-compact,
.document-filename-link {
  display: inline-flex;
  align-items: center;
  line-height: 1;
}

/* Prevent SVG baseline shifts: render as block and center */
.timeline-item-icon svg,
.visit-type-svg,
.document-file-icon,
.timeline-item-icon > * {
  display: block;
  vertical-align: middle;
  line-height: 1;
}


.timeline-item-content {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.timeline-item-header-compact {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-sm);
}

.timeline-item-main {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  flex: 1;
  min-width: 0;
}

.timeline-item-label-row {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  flex-wrap: wrap;
}

.timeline-item-wellness-single-line {
  flex-wrap: nowrap;
  overflow: hidden;
  min-width: 0;
  gap: var(--spacing-xs);
}

/* Center wellness text vertically so the label aligns in the box */
.timeline-item-wellness-single-line {
  align-items: center;
}

.timeline-item-wellness-single-line .timeline-item-label-compact {
  flex-shrink: 0;
  margin-right: 0;
}

.timeline-item-wellness-single-line .wellness-title-badge-inline {
  flex-shrink: 0;
}

.timeline-item-wellness-single-line .timeline-badge {
  flex-shrink: 0;
  white-space: nowrap;
  margin: 0;
}

.timeline-item-wellness-single-line .timeline-item-date-compact {
  flex-shrink: 0;
  margin-right: 0;
}

.wellness-date-spaced {
  margin-left: auto !important;
  padding-left: var(--spacing-md);
}

.timeline-item-wellness-single-line .attachment-indicator {
  flex-shrink: 0;
  margin-left: var(--spacing-xs);
  margin-right: 0;
}

/* Badges row under the visit label */
.timeline-item-badges-row {
  display: flex;
  gap: var(--spacing-xs);
  align-items: center;
  margin-top: 0.25rem;
  flex-wrap: wrap;
}

.wellness-badges-group {
  display: flex;
  gap: var(--spacing-xs);
  align-items: center;
  flex-wrap: wrap;
}

/* Accent pill used for Wellness and Injury icons */
.visit-pill {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  box-shadow: 0 8px 20px rgba(11, 61, 145, 0.14);
  transition: transform 160ms var(--transition-base), box-shadow 160ms var(--transition-base);
}
.visit-pill:hover {
  transform: translateY(-3px);
}
.visit-pill .visit-type-svg {
  width: 20px;
  height: 20px;
}
.visit-pill--accent {
  background: linear-gradient(180deg, var(--color-visit-accent-2), var(--color-visit-accent));
}

[data-theme="dark"] .visit-pill {
  box-shadow: 0 6px 18px rgba(0,0,0,0.6);
}

/* Outline icon wrapper: no filled badge, icon color is the accent */
.visit-icon-outline {
  width: 30px;
  height: 40px;
  display: grid;
  place-items: center;
  color: var(--color-visit-accent);
  background: transparent;
  transition: box-shadow 160ms var(--transition-base);
}
.visit-icon-outline .visit-type-svg {
  width: 20px;
  height: 20px;
  transform: translateY(var(--icon-optical-offset, 0));
}

[data-theme="dark"] .visit-icon-outline {
  color: var(--color-visit-accent-2);
}

/* Make icons in the VisitTypeModal larger and color-coded per type */
.visit-type-icon .visit-icon-outline {
  /* Reduced from +50% to +25% overall: wrapper 96px -> 120px */
  width: 120px;
  height: 120px;
}
.visit-type-icon .visit-icon-outline .visit-type-svg {
  /* SVG scaled proportionally (48px -> 60px for +25%) */
  width: 60px;
  height: 60px;
}

/* Increase injury icon size slightly in the Visit Type modal to visually
   match the clipboard and pill icons (some icon sets have different
   viewBox scaling which makes them appear smaller). */
.visit-type-icon .visit-icon-outline.visit-icon--injury .visit-type-svg,
.visit-type-icon .visit-icon-outline.visit-icon--injury .visit-type-svg svg {
  width: 68px;
  height: 68px;
  display: inline-block;
  transform: translateY(var(--icon-optical-offset, 0)) scale(0.92);
}

.visit-type-icon .visit-icon-outline.visit-icon--sick {
  /* optical offset controlled via --icon-optical-offset on the icon */
}
.visit-icon--wellness { color: var(--color-success); }
.visit-icon--sick { color: var(--color-danger); }
.visit-icon--injury { color: var(--color-visit-accent); }
.visit-icon--vision { color: var(--color-vision); }
.visit-type-button .visit-icon-outline:hover {
  /* hover lift removed in favor of glow on the icon to avoid layout shift */
}

/* Hover lift removed for sick icon; glow is used instead */
.visit-type-button .visit-icon-outline.visit-icon--sick:hover {
}

/* Sidebar layout for Visits page */
.visits-page-layout {
  display: flex;
  gap: 24px;
  align-items: stretch;
}
.visits-sidebar {
  width: 220px;
  flex: 0 0 220px;
  position: sticky;
  align-self: stretch;
  height: auto;
}
.visits-sidebar-inner {
  display: flex;
  flex-direction: column;
  min-height: 100%;
  color: #fff;
  border-radius: 12px;
  padding: 16px;
  box-shadow: var(--elevation-3);
  border: 1px solid var(--color-border);
  overflow: auto;
}
.sidebar-brand {
  font-size: 1.125rem;
  font-weight: 700;
}
.sidebar-sub {
  font-size: 0.875rem;
  color: rgba(255,255,255,0.78);
}
.sidebar-divider {
  height: 1px;
  background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.04));
  margin: 12px 0;
}
.sidebar-stats {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.visit-stats-grid {
  display: grid;
  grid-auto-rows: min-content;
  gap: 10px;
}
.visit-stat-card {
  width: 100%;
  padding: 12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.04);
  color: #fff;
}
.visit-stat-icon { opacity: 0.98 }
.visit-stat-label { color: rgba(255,255,255,0.8) }
.visit-stat-value { color: #fff }

.sidebar-section { margin-top: 18px }
.sidebar-section-title { font-size: 0.875rem; color: rgba(255,255,255,0.82); margin-bottom: 8px }

.child-selector { display: flex; flex-direction: column; gap: 8px }
.child-row { display: flex; align-items: center; gap: 10px; width: 100%; padding: 8px; border-radius: 8px; background: transparent; border: none; text-align: left; color: inherit; cursor: pointer }
.child-row:hover { background: rgba(255,255,255,0.02) }
.child-row.active { background: linear-gradient(90deg, rgba(96,165,250,0.14), rgba(59,130,246,0.06)); box-shadow: 0 6px 18px rgba(12,18,30,0.12) }
.child-row-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover }
.child-row-avatar-placeholder { width: 40px; height: 40px; border-radius: 50%; display:flex; align-items:center; justify-content:center; background: rgba(255,255,255,0.04); color: rgba(255,255,255,0.9) }

/* Stacked avatars for the All Children selector (larger than pill stack) */
.child-all-avatars {
  display: inline-flex;
  align-items: center;
  height: 40px;
  margin-right: 6px;
}
.child-all-avatar-item {
  display: inline-block;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--color-background-card);
  box-shadow: 0 6px 14px rgba(0,0,0,0.06);
  background: var(--color-background-card);
}
.child-row-body { flex: 1 }
.child-row-name { font-weight: 600 }
.child-row-sub { font-size: 0.8rem; color: rgba(255,255,255,0.7) }
.child-row-indicator { width: 8px; height: 8px; border-radius: 999px; background: linear-gradient(90deg,#60a5fa,#3b82f6); margin-left: 8px; opacity: 0 }
.child-row.active .child-row-indicator { opacity: 1; transform: translateX(0); transition: opacity 180ms ease }

.sidebar-spacer { flex: 1 }
.sidebar-action { padding-top: 12px }
.sidebar-action-stack { display: flex; flex-direction: column; gap: 10px; }
.sidebar-add-btn { width: 100%; background: linear-gradient(90deg, #60a5fa, #3b82f6); color: #fff }
.sidebar-add-btn:hover { filter: brightness(1.03); transform: translateY(-2px) }

/* Add Visit: same border as Filters card (visits-sidebar-inner); ghost fill, accent on text; hover = soft tint + glow. */
.visits-sidebar .sidebar-add-visit-btn {
  width: 100%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-normal);
  border-radius: 12px;
  border: 1px solid var(--color-border);
  background: transparent;
  color: var(--color-text-secondary);
  transition: color var(--transition-base), background-color var(--transition-base), border-color var(--transition-base), box-shadow var(--transition-base);
}
.visits-sidebar .sidebar-add-visit-btn-icon {
  width: 1.125rem;
  height: 1.125rem;
  flex-shrink: 0;
  opacity: 0.9;
}
[data-theme="dark"] .visits-sidebar .sidebar-add-visit-btn {
  color: rgba(147, 197, 253, 0.85);
}
[data-theme="dark"] .visits-sidebar .sidebar-add-visit-btn:hover:not(:disabled) {
  color: rgba(147, 197, 253, 1);
  background: rgba(59, 130, 246, 0.06);
  box-shadow: 0 0 0 1px rgba(96, 165, 250, 0.15), 0 0 16px rgba(59, 130, 246, 0.12);
}
[data-theme="dark"] .visits-sidebar .sidebar-add-visit-btn:focus-visible {
  outline: none;
  color: rgba(147, 197, 253, 1);
  background: rgba(59, 130, 246, 0.08);
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.35);
}
[data-theme="dark"] .visits-sidebar .sidebar-add-visit-btn:active:not(:disabled) {
  background: rgba(59, 130, 246, 0.1);
  box-shadow: 0 0 0 1px rgba(96, 165, 250, 0.2);
}
/* Light mode: same ghost idea, accent color */
body:not([data-theme="dark"]) .visits-sidebar .sidebar-add-visit-btn {
  color: var(--color-primary-600);
}
body:not([data-theme="dark"]) .visits-sidebar .sidebar-add-visit-btn:hover:not(:disabled) {
  color: var(--color-primary-700);
  background: var(--color-primary-50);
  box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.1);
}
body:not([data-theme="dark"]) .visits-sidebar .sidebar-add-visit-btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px var(--color-primary-light);
}

.visits-main { flex: 1 }

/* Light mode only: improve filter text color for readability (text only, no sidebar background change) */
body:not([data-theme="dark"]) .visits-page-layout .sidebar-brand {
  color: var(--color-text-primary);
}
body:not([data-theme="dark"]) .visits-page-layout .sidebar-section-title {
  color: var(--color-text-secondary);
}
body:not([data-theme="dark"]) .visits-page-layout .visit-stat-label {
  color: var(--color-text-secondary);
}
body:not([data-theme="dark"]) .visits-page-layout .visit-stat-value {
  color: var(--color-text-primary);
}
body:not([data-theme="dark"]) .visits-page-layout .child-row-name {
  color: var(--color-text-primary);
}
body:not([data-theme="dark"]) .visits-page-layout .child-row-sub {
  color: var(--color-text-secondary);
}

@media (max-width: 900px) {
  .visits-page-layout { flex-direction: column }
  .visits-sidebar { position: relative; width: 100%; top: 0; }
}

/* Create/Edit visit page: back above sidebar; title + body right of sidebar; Save/Cancel level with title on right */
.visit-form-page.visit-form-layout-grid {
  display: grid;
  grid-template-columns: 300px 1fr;
  grid-template-rows: auto auto 1fr;
  gap: 12px 24px;
  align-items: stretch;
}

/* Back link left, Save/Cancel right â€“ same row, level with each other */
.visit-form-back-row {
  grid-column: 1 / -1;
  grid-row: 1;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
}

.visit-form-back-row .visit-form-back {
  margin-bottom: 0;
}

.visit-form-back-row .visit-detail-actions {
  flex-shrink: 0;
}

/* Sidebar in column 1, starts at row 2 (level with "Add X Visit"), spans to bottom */
.visit-form-sidebar-cell {
  grid-column: 1;
  grid-row: 2 / -1;
  min-width: 0;
  display: flex;
  flex-direction: column;
}

/* Title row: column 2, row 2; "Add X Visit" level with sidebar (above main body) */
.visit-form-top-row {
  grid-column: 2;
  grid-row: 2;
  display: flex;
  align-items: center;
}

.visit-form-top-row .visit-header-title {
  margin: 0;
}

.visit-form-body-cell {
  grid-column: 2;
  grid-row: 3;
  min-width: 0;
}

.visit-form-page .visit-form-sidebar-cell .visits-sidebar {
  flex: 1;
  min-height: 0;
  align-self: stretch;
}

.visit-form-page .visits-sidebar {
  width: 100%;
  max-width: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
}

.visit-form-page .visits-sidebar-inner {
  padding: 10px 12px;
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
}

.visit-form-page .sidebar-divider {
  margin: 8px 0;
}

.visit-form-page .sidebar-section {
  margin-top: 10px;
}

.visit-form-page .sidebar-section-title {
  margin-bottom: 6px;
}

.visit-form-page .sidebar-action {
  padding-top: 8px;
}

.visit-form-page .sidebar-action-stack {
  gap: 6px;
}

.visit-form-page .visits-sidebar .measurement-card-add {
  padding-top: 6px;
  padding-bottom: 6px;
}

.visit-form-sidebar-empty {
  margin: 0;
  font-size: 0.8125rem;
  color: rgba(255, 255, 255, 0.75);
  line-height: 1.4;
}

@media (max-width: 900px) {
  .visit-form-page.visit-form-layout-grid {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto 1fr;
  }

  /* Back first, then header (title + buttons), then sidebar, then body */
  .visit-form-back-row { grid-column: 1; grid-row: 1; }
  .visit-form-sidebar-cell { grid-column: 1; grid-row: 3; }
  .visit-form-top-row { grid-column: 1; grid-row: 2; }
  .visit-form-body-cell { grid-column: 1; grid-row: 4; }
}

/* Ensure SVG icons explicitly pick up currentColor for fill/stroke
   and force per-type colors to match light mode when in dark mode. */
.visit-icon-outline .visit-type-svg,
.visit-icon-outline .visit-type-svg svg {
  stroke: currentColor;
}

/* CENTRAL ICON NORMALIZATION
   Use CSS variables to control stroke weights in one place and make
   it easy to tune modal vs inline sizes. Filled icons opt-out via
   `.visit-type-svg--filled`. This block intentionally uses high
   specificity and `!important` where necessary to override legacy
   inline attributes from third-party SVGs. */
:root {
  --icon-stroke-default: 1px;      /* baseline for timeline/list */
  --icon-stroke-modal: 1.25px;     /* larger for modal big icons */
  --icon-stroke-sick: 1px;         /* pill icon adjustment */
}

.visit-icon-outline {
  /* default stroke for icons inside this wrapper */
  --icon-stroke: var(--icon-stroke-default);
}

/* Modal-sized icons should be heavier by default */
.visit-type-icon .visit-icon-outline {
  --icon-stroke: var(--icon-stroke-modal);
}

/* Specific per-type adjustments (easy to tune) */
.visit-icon--sick { --icon-stroke: var(--icon-stroke-sick); }

/* Apply stroke/fill/weight uniformly to svg and path elements; filled
   icons opt out with `.visit-type-svg--filled`. */
.visit-icon-outline .visit-type-svg:not(.visit-type-svg--filled),
.visit-icon-outline .visit-type-svg:not(.visit-type-svg--filled) svg,
.visit-icon-outline .visit-type-svg:not(.visit-type-svg--filled) svg path,
.visit-icon-outline .visit-type-svg:not(.visit-type-svg--filled) svg g {
  stroke: currentColor !important;
  stroke-width: var(--icon-stroke) !important;
  fill: none !important;
  vector-effect: non-scaling-stroke !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
}

/* Filled icons (explicit) keep their filled appearance */
.visit-type-svg--filled,
.visit-type-svg--filled svg,
.visit-type-svg--filled svg path {
  fill: currentColor !important;
  stroke: none !important;
}

/* Ensure stroke rules also apply to path elements inside icon SVGs (mdi/react, etc.)
   and use non-scaling strokes so stroke thickness remains consistent. */
.visit-icon-outline .visit-type-svg:not(.visit-type-svg--filled) svg path,
.visit-icon-outline .visit-type-svg:not(.visit-type-svg--filled) svg g {
  stroke: currentColor;
  fill: none;
  vector-effect: non-scaling-stroke;
}

/* Normalize SVG stroke appearance across icon sets so thickness looks uniform */
.visit-icon-outline .visit-type-svg svg {
  stroke-linecap: round;
  stroke-linejoin: round;
  vector-effect: non-scaling-stroke; /* keeps stroke consistent when icons scale */
}

/* Some icon libraries/components expect to be filled; add an explicit
   helper class when you want a filled icon: `visit-type-svg--filled`. */
.visit-type-svg--filled,
.visit-type-svg--filled svg {
  fill: currentColor;
  stroke: none;
}

/* Modal icon: slightly heavier stroke at modal size for better legibility */
.visit-type-icon .visit-type-svg svg {
  stroke-width: 1.25px;
}

/* Exception: make the sick (pill) icon thinner in the modal so its
   visual weight matches other icons. This overrides the modal-wide
   increase for this specific type. */
.visit-type-icon .visit-icon-outline.visit-icon--sick .visit-type-svg svg {
  stroke-width: 1px;
}

/* Optical offsets per icon (keeps nudges centralized and easy to tweak) */
.visit-icon--sick { --icon-optical-offset: -2px; }
.visit-icon--injury { --icon-optical-offset: 1px; }

/* Hover glow on icon instead of moving the button (no layout shift) */
.visit-type-button:hover .visit-icon-outline {
  /* remove hover outline/glow; keep hover subtle without layout shift */
  box-shadow: none;
}

/* Ensure sick icon wrapper does not show a square/box background
   and visually matches other outline icons (no extra box). */
.visit-icon-outline.visit-icon--sick {
  background: transparent;
  box-shadow: none;
  border-radius: 9999px;
  padding: 0;
}

/* If a pill icon renders with an internal filled rect, ensure the wrapper
   doesn't clip or add a visible square. */
.visit-icon-outline.visit-icon--sick .visit-type-svg {
  display: inline-block;
}

/* Strongly ensure no visual box appears around the sick icon: remove
   backgrounds, borders or shadows from the wrapper and any SVG children.
   Use !important sparingly here to override upstream icon-library inline
   styles that could introduce rect fills. */
.visit-icon-outline.visit-icon--sick,
.visit-icon-outline.visit-icon--sick .visit-type-svg,
.visit-icon-outline.visit-icon--sick svg,
.visit-icon-outline.visit-icon--sick svg * {
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
  fill: none !important;
}

[data-theme="dark"] .visit-icon--wellness { color: var(--color-success); }
[data-theme="dark"] .visit-icon--sick { color: var(--color-danger); }
[data-theme="dark"] .visit-icon--injury { color: var(--color-visit-accent); }
[data-theme="dark"] .visit-icon--vision { color: var(--color-vision); }

/* Per-type overrides: some icon libraries are filled by default
   (Material / Phosphor). Ensure those icons render as intended
   instead of getting outline-only (or accidental colored rects). */
.visit-icon--sick .visit-type-svg.visit-type-svg--filled,
.visit-icon--sick .visit-type-svg.visit-type-svg--filled svg {
  fill: currentColor;   /* allow filled variants for sick icons */
  stroke: none;
}

/* For lucide / stroke-based icons (wellness, vision) keep stroke-only */

.visit-icon--wellness .visit-type-svg,
.visit-icon--wellness .visit-type-svg svg,
.visit-icon--injury .visit-type-svg,
.visit-icon--injury .visit-type-svg svg {
  stroke: currentColor;
  fill: none;
}

.visit-icon--illness { 
  color: var(--color-warning);
  stroke-width: 0.0001;
}

[data-theme="dark"] .visit-icon--illness { color: var(--color-warning); }

/* Slightly reduce mask stroke to match perceived weight of other outline icons. */
.visit-icon--illness .visit-type-svg svg,
.visit-icon--illness .visit-type-svg svg path {
  stroke-width: 0.9px;
  stroke-linecap: round;
  stroke-linejoin: round;
  vector-effect: non-scaling-stroke;
}

/* Force mask SVG path to render as stroke-only even if the icon library
   sets fill attributes inline. Use !important carefully to override
   inline attributes from third-party SVGs for this specific icon. */
.visit-icon--illness .visit-type-svg svg path,
.visit-icon--illness .visit-type-svg svg {
  stroke: currentColor !important;
  fill: none !important;
  stroke-width: 0.95px !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  vector-effect: non-scaling-stroke !important;
}
/* Vision icons should be outline/stroke-only like other lucide icons */
.visit-icon--vision .visit-type-svg,
.visit-icon--vision .visit-type-svg svg {
  stroke: currentColor;
  fill: none;
  vector-effect: non-scaling-stroke;
}

/* Reduce stroke thickness for outline icons to half their default
   to match design request. Use non-scaling stroke so the width is
   consistent regardless of transforms. */
.visit-icon--wellness .visit-type-svg,
.visit-icon--wellness .visit-type-svg svg,
.visit-icon--injury .visit-type-svg,
.visit-icon--injury .visit-type-svg svg {
  vector-effect: non-scaling-stroke;
}

/* Slightly larger for injury icons in compact timeline so they match the
   perceived weight of LuClipboard / Pill icons used elsewhere. */
.visit-icon--injury .visit-type-svg,
.visit-icon--injury .visit-type-svg svg {
  width: 22px;
  height: 22px;
  transform: scale(0.95);
}

/* Make sure any filled paths in the Material injury icon render as filled
   and are visually bolder to match line weight of other icons. Use
   a slightly thicker appearance by ensuring fill is applied and stroke
   removed for filled variants. */
.visit-icon--injury .visit-type-svg.visit-type-svg--filled svg path,
.visit-icon--injury .visit-type-svg.visit-type-svg--filled svg g {
  fill: currentColor !important;
  stroke: none !important;
}

/* If an injury icon is explicitly marked as "filled" use the filled style
   This overrides the generic injury outline rule above for icons that need
   to render filled shapes (Material / Phosphor filled variants). */
.visit-icon--injury .visit-type-svg.visit-type-svg--filled,
.visit-icon--injury .visit-type-svg.visit-type-svg--filled svg {
  fill: currentColor;
  stroke: none;
  vector-effect: none;
}

/* Strong override: force illness (mask) icon and all its SVG children to
   use the centralized stroke variable and remove any fills or inline
   stroke-widths coming from third-party icon libs. Placed after other
   icon rules to ensure highest specificity in this file. */


.timeline-item-date-row {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  flex-wrap: wrap;
}

.timeline-item-date-compact {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  white-space: nowrap;
}

.illness-type-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  white-space: nowrap;
  background: var(--color-background);
}

.timeline-item-arrow-compact {
  font-size: 1rem;
  color: var(--color-primary);
  transition: transform 0.2s;
  flex-shrink: 0;
  opacity: 0.6;
}

.timeline-item-modern:hover .timeline-item-arrow-compact {
  transform: translateX(3px);
  opacity: 1;
}

.timeline-item-primary {
  font-size: var(--font-size-sm);
  color: var(--color-text-primary);
  font-weight: var(--font-weight-medium);
  line-height: 1.4;
}

.timeline-item-badges {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
  align-items: center;
}

.timeline-badge {
  display: inline-flex;
  align-items: center;
  padding: 2px var(--spacing-xs);
  background: var(--color-surface);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  line-height: 1.4;
  white-space: nowrap;
}

.timeline-badge-ongoing {
  background: var(--color-warning-light);
  color: var(--color-warning);
  font-weight: var(--font-weight-semibold);
}

.timeline-badge-ongoing-standalone {
  margin: 0;
}

.wellness-title-badge {
  /* Match timeline badge sizing/shape but keep primary (blue) color */
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px var(--spacing-xs);
  background: var(--color-primary-light);
  color: var(--color-primary);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  line-height: 1;
  white-space: nowrap;
}

.wellness-badges-group {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  flex-shrink: 0;
  padding-left: var(--spacing-md);
}

/* Injury badge should have same left padding as wellness badges */
.injury-badge {
  /* moved left padding to the wrapper `.injury-content` so badges
     themselves don't carry additional left margin */
  margin-left: 0;
  flex-shrink: 0;
  white-space: nowrap;
}

/* Wrapper for injury visit details. Adds left padding so the injury
   content lines up with wellness entries' badges. */
.injury-content {
  padding-left: var(--spacing-md);
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
}

/* Make primary info render inline within injury content to match wellness layout */
.injury-content .timeline-item-primary {
  display: inline-block;
  margin-left: var(--spacing-xs);
}

/* Align injury date to the right and give it the same left spacing */
.injury-date-spaced {
  margin-left: auto;
  padding-left: var(--spacing-md);
}

.attachment-indicator {
  display: inline-flex;
  align-items: center;
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  margin-left: var(--spacing-xs);
}

.attachment-indicator .attachment-icon,
.attachment-icon {
  width: 16px;
  height: 16px;
  display: inline-block;
  color: inherit;
}
.attachment-indicator .attachment-icon svg,
.attachment-icon svg {
  stroke: currentColor;
  fill: none;
}

.child-name-badge {
  display: inline-flex;
  align-items: center;
  padding: 2px var(--spacing-xs);
  background: var(--color-primary-light);
  border: 1px solid var(--color-primary);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
  white-space: nowrap;
  text-decoration: none;
  transition: all 0.2s ease;
  line-height: 1.2;
  margin-left: var(--spacing-xs);
}

.child-name-badge:hover {
  background: var(--color-primary);
  color: #ffffff;
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

/* Dark mode adjustments for child name badge */
[data-theme="dark"] .child-name-badge {
  background: rgba(96, 165, 250, 0.15);
  border-color: var(--color-primary);
  color: var(--color-primary);
}

[data-theme="dark"] .child-name-badge:hover {
  background: var(--color-primary);
  color: #ffffff;
}

/* Timeline styles */
.timeline-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.timeline-item {
  padding: var(--spacing-md);
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  transition: all 0.2s ease;
  cursor: pointer;
}

.timeline-item:hover {
  background: var(--color-surface);
  border-color: var(--color-primary);
  box-shadow: var(--shadow-sm);
}

.timeline-item-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing-sm);
}

.timeline-item-type {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.timeline-item-date {
  font-weight: 600;
  color: var(--color-text-primary);
}

.timeline-item-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  padding: var(--spacing-xs) var(--spacing-sm);
  background: var(--color-surface);
  border-radius: var(--radius-sm);
}

.timeline-item-arrow {
  font-size: 1.25rem;
  color: var(--color-primary);
  transition: transform 0.2s;
}

.timeline-item:hover .timeline-item-arrow {
  transform: translateX(4px);
}

.timeline-item-details {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.timeline-item-detail {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.timeline-item-measurements {
  display: flex;
  gap: var(--spacing-md);
  flex-wrap: wrap;
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.timeline-item-badge {
  display: inline-block;
  padding: var(--spacing-xs) var(--spacing-sm);
  background: var(--color-surface);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.timeline-item-badge.ongoing {
  background: var(--color-warning-light);
  color: var(--color-warning);
  font-weight: 600;
}

/* About Dropdown */
.about-dropdown {
  position: relative;
}

.about-dropdown-trigger {
  background: none;
  border: none;
  color: var(--color-text-primary);
  cursor: pointer;
  padding: var(--spacing-xs);
  border-radius: var(--radius-md);
  transition: background-color 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
}

.about-dropdown-trigger:hover {
  background-color: var(--color-surface);
}

.about-dropdown-icon {
  width: 20px;
  height: 20px;
  color: var(--color-text-primary);
}

.about-dropdown-menu {
  position: absolute;
  top: calc(100% + var(--spacing-xs));
  right: 0;
  background-color: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  min-width: 150px;
  padding: var(--spacing-xs);
  z-index: 1000;
}

.about-dropdown-item {
  display: block;
  padding: var(--spacing-sm) var(--spacing-md);
  color: var(--color-text-primary);
  text-decoration: none;
  border-radius: var(--radius-sm);
  transition: background-color 0.2s ease;
  font-size: var(--font-size-sm);
}

.about-dropdown-menu button.about-dropdown-item {
  width: 100%;
  text-align: left;
  border: none;
  background: none;
  cursor: pointer;
  font: inherit;
}

.about-dropdown-item:hover {
  background-color: var(--color-surface);
}

/* Theme Toggle Dot */
.theme-toggle-dot {
  background: none;
  border: none;
  cursor: pointer;
  padding: var(--spacing-xs);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-full);
  transition: background-color 0.2s ease;
  width: 32px;
  height: 32px;
}

.theme-toggle-dot:hover {
  background-color: var(--color-surface);
}

.theme-dot {
  width: 8px;
  height: 8px;
  border-radius: var(--radius-full);
  background-color: var(--color-text-primary);
  display: block;
}

.nav-link {
  padding: var(--spacing-sm) var(--spacing-md);
  text-decoration: none;
  color: var(--color-text-secondary);
  border-radius: var(--radius-md);
  transition: all 0.2s;
}

.nav-link:hover {
  color: var(--color-primary);
  background-color: var(--color-surface);
}

.nav-link.active {
  color: var(--color-primary);
  font-weight: 600;
}

.app-main {
  flex: 1;
  padding: var(--spacing-md);
  display: flex;
  justify-content: center;
  width: 100%;
}

.content-wrapper {
  max-width: 1600px;
  width: 100%;
  box-sizing: border-box;
  padding-bottom: 30px; /* ensure space below body even when content fills the page */
}

.app-footer {
  background-color: var(--color-background);
  border-top: 1px solid var(--color-border);
  margin-top: auto;
}

/* Version footer - fixed to bottom right (matches Docked style) */
.version-footer {
  position: fixed;
  bottom: 16px;
  right: 16px;
  align-items: center;
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  background: rgba(255, 255, 255, 0.05);
  border-radius: 6px;
  color: var(--color-text-secondary);
  display: inline-flex;
  font-size: 0.7rem;
  gap: 6px;
  opacity: 0.6;
  padding: 4px 8px;
  pointer-events: auto;
  transition: opacity 0.2s ease, color 0.2s ease;
  z-index: 100;
}

.version-footer:hover {
  opacity: 1;
  color: var(--color-primary);
}

.version-footer-link {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  color: inherit;
  text-decoration: none;
  transition: color 0.2s ease;
}

.version-footer-link:hover {
  color: var(--color-primary);
}

.version-footer-link svg {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
}

.version-footer-separator {
  color: inherit;
  opacity: 0.5;
  user-select: none;
}

.version-footer-text {
  color: inherit;
}

.version-footer-version {
  color: inherit;
}

/* Dark mode adjustments for version footer */
[data-theme="dark"] .version-footer {
  background: rgba(255, 255, 255, 0.05);
}

[data-theme="light"] .version-footer {
  background: rgba(0, 0, 0, 0.05);
}

/* ============================================================================
   Page Components
   ============================================================================ */

.page-container {
  width: 100%;
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--spacing-xl);
}

.page-header-actions {
  display: flex;
  gap: var(--spacing-md);
  align-items: center;
}

.page-header h1 {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: var(--spacing-sm);
}

.breadcrumb {
  display: inline-block;
  color: var(--color-text-secondary);
  text-decoration: none;
  margin-bottom: var(--spacing-md);
  font-size: 0.875rem;
}

.child-detail-section .breadcrumb {
  margin-bottom: var(--spacing-lg);
}

.breadcrumb:hover {
  color: var(--color-primary);
}

/* ============================================================================
   Card Component
   ============================================================================ */

.card {
  background-color: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  box-shadow: var(--shadow-sm);
  /* margin-bottom: 20px; */
}

.card-title {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: var(--spacing-md);
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.card-title-icon {
  font-size: 1.5rem;
  line-height: 1;
}

.card-content {
  color: var(--color-text-primary);
}

/* ============================================================================
   Button Component
   ============================================================================ */

.btn {
  padding: var(--spacing-sm) var(--spacing-lg);
  font-size: 1rem;
  font-weight: 500;
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-xs);
}

.btn-sm {
  padding: var(--spacing-xs) var(--spacing-md);
  font-size: 0.875rem;
}

.btn-md {
  padding: var(--spacing-sm) var(--spacing-lg);
  font-size: 1rem;
}

.btn-lg {
  padding: var(--spacing-md);
}

.btn-primary {
  background-color: var(--color-primary);
  color: white;
}

.btn-primary:hover:not(:disabled) {
  background-color: var(--color-primary-hover);
}

.btn-secondary {
  background-color: var(--color-surface);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border);
}

.btn-secondary:hover:not(:disabled) {
  background-color: var(--color-border);
}

.btn-danger {
  background-color: var(--color-danger);
  color: white;
}

.btn-danger:hover:not(:disabled) {
  background-color: var(--color-danger-hover);
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-full-width {
  width: 100%;
}

.btn-icon {
  width: 1.25em;
  height: 1.25em;
  flex-shrink: 0;
}

/* ============================================================================
   Kids Management Page
   ============================================================================ */

.family-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.family-members-by-family {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xl);
}

.family-members-section {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.family-members-section-title {
  margin: 0 0 var(--spacing-xs) 0;
  font-size: 1.125rem;
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.family-card {
  padding: var(--spacing-lg);
}

.family-content {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
}

.family-avatar {
  flex-shrink: 0;
}

.family-avatar-img {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: var(--shadow-sm);
}

.family-info {
  flex: 1;
  min-width: 0;
}

.family-name {
  margin: 0 0 var(--spacing-xs) 0;
  font-size: 1.25rem;
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
}

/* Family home tab: header spacing */
.home-family-tab-title {
  margin: 0 0 var(--spacing-md) 0;
  font-size: 1.375rem;
  font-weight: var(--font-weight-semibold);
  line-height: 1.3;
  color: var(--color-text-primary);
}

.home-family-sections {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xl);
}

.home-family-section {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.child-card-add-wrap {
  text-decoration: none;
  color: inherit;
}

.child-card-add {
  border: 2px dashed var(--color-border);
  background: var(--color-surface);
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
}

.child-card-add:hover {
  border-color: var(--color-primary);
  background: var(--color-primary-light, rgba(0 0 0 / 0.03));
}

.child-add-avatar {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: var(--color-border);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  color: var(--color-text-secondary);
}

.family-details {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.family-actions {
  display: flex;
  gap: var(--spacing-sm);
  flex-shrink: 0;
}

.family-add-link {
  text-decoration: none;
  color: inherit;
}

.family-add-card {
  border: 2px dashed var(--color-border);
  background-color: transparent;
  transition: all 0.2s;
  cursor: pointer;
}

.family-add-card:hover {
  border-color: var(--color-primary);
  background-color: var(--color-surface);
  transform: translateY(-2px);
  box-shadow: var(--elevation-2);
}

.family-add-avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: 2px dashed var(--color-border);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  color: var(--color-text-secondary);
  background-color: var(--color-surface);
  transition: all 0.2s;
}

.family-add-card:hover .family-add-avatar {
  border-color: var(--color-primary);
  color: var(--color-primary);
  background-color: var(--color-primary-light);
}

/* ============================================================================
   Children List
   ============================================================================ */

.children-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.child-card-link {
  text-decoration: none;
  color: inherit;
}

/* Children Grid Cards */
.children-grid-cards {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--spacing-md);
}

.child-card-compact {
  padding: 0;
  border: 2px solid var(--color-border);
  border-radius: var(--radius-md);
  background-color: var(--color-background-card);
}

.child-card-compact .card-content {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
  padding: var(--spacing-lg);
  transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, border-color 0.2s ease-in-out;
  cursor: pointer;
}

.child-card-compact:hover {
  border-color: var(--color-primary);
}

.child-card-compact:hover .card-content {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.child-card-content {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  position: relative;
}

.child-card-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-sm);
}

.child-name {
  margin: 0;
  font-size: 1.4rem;
  color: var(--color-text-primary);
  font-weight: 700;
  line-height: 1.2;
}

.child-gender-badge {
  font-size: 1.4rem;
  line-height: 1;
}

.child-card-details {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.child-detail-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  color: var(--color-text-secondary);
  font-size: 0.9rem;
}

.detail-icon {
  font-size: 1.1rem;
  flex-shrink: 0;
}

.detail-text {
  font-weight: 500;
}

.child-card-avatar {
  flex-shrink: 0;
}

.child-avatar-large {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: var(--shadow-sm);
}

.child-card-arrow {
  font-size: 1.25rem;
  color: var(--color-primary);
  position: absolute;
  bottom: var(--spacing-xs);
  right: var(--spacing-sm);
  transition: transform 0.2s;
  line-height: 1;
}

.child-card-compact:hover .child-card-arrow {
  transform: translateX(4px);
}

/* ============================================================================
   Child Detail
   ============================================================================ */

.detail-row {
  display: flex;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-md);
}

.detail-label {
  font-weight: 600;
  min-width: 140px;
}

.detail-value {
  color: var(--color-text-secondary);
}

/* ============================================================================
   Child Detail Page - Redesigned Layout
   ============================================================================ */

/* Overview Section */
.overview-section {
  margin-bottom: var(--spacing-lg);
}

.overview-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-lg);
  padding-bottom: var(--spacing-lg);
  border-bottom: 1px solid var(--color-border);
}

.overview-main {
  display: flex;
  gap: var(--spacing-xl);
  align-items: flex-start;
  flex: 1;
  min-width: 0;
}

.overview-actions {
  display: flex;
  gap: var(--spacing-sm);
  flex-shrink: 0;
  flex-wrap: wrap;
}

.overview-avatar {
  flex-shrink: 0;
}

.overview-avatar-button {
  position: relative;
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  border-radius: 50%;
  overflow: hidden;
  transition: transform 0.2s;
}

.overview-avatar-button:hover {
  transform: scale(1.05);
}

.overview-avatar-button:hover .overview-avatar-overlay {
  opacity: 1;
}

.overview-avatar-static {
  border-radius: 50%;
  overflow: hidden;
}

.overview-avatar-static .overview-avatar-img {
  display: block;
}

.overview-avatar-img {
  width: 140px;
  height: 140px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: var(--elevation-3);
  display: block;
}

.overview-avatar-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  opacity: 0;
  transition: opacity 0.2s;
}

.overview-avatar-edit-icon {
  font-size: 1.5rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.overview-info {
  flex: 1;
  min-width: 0;
}

.overview-name {
  font-size: var(--font-size-3xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
  margin: 0 0 var(--spacing-md) 0;
  line-height: var(--line-height-tight);
}

.overview-details {
  /* display: flex; */
  flex-direction: column;
  gap: var(--spacing-sm);
}

.overview-detail-item {
  display: flex;
  gap: var(--spacing-md);
  align-items: baseline;
}

.overview-detail-label {
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-secondary);
  min-width: 120px;
  font-size: var(--font-size-sm);
}

.overview-detail-value {
  color: var(--color-text-primary);
  font-size: var(--font-size-base);
}

.overview-last-visits {
  display: flex;
  gap: var(--spacing-md);
  flex-wrap: wrap;
  margin-bottom: var(--spacing-lg);
}

.overview-last-visit-link {
  text-decoration: none;
  color: inherit;
  display: block;
}

.overview-last-visit-link:hover .overview-last-visit {
  /* Keep pointer for interactivity but avoid changing background color */
  cursor: pointer;
}

.overview-last-visit {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--color-surface);
  transition: background-color 0.2s;
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
}

.overview-visit-icon {
  font-size: 1.25rem;
  line-height: 1;
}

.overview-visit-info {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.overview-visit-label {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
}

.overview-visit-date {
  font-size: var(--font-size-sm);
  color: var(--color-text-primary);
  font-weight: var(--font-weight-semibold);
}

.overview-no-visits {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-style: italic;
  padding: var(--spacing-sm) 0;
}

/* Toolbar */
/* Child toolbar removed - actions now in overview header */

/* Visits List - Detailed */
.visits-list-detailed {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.visit-item-link {
  text-decoration: none;
  color: inherit;
  display: block;
}

.visit-item {
  padding: var(--spacing-lg);
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  transition: all var(--transition-base);
  cursor: pointer;
}

.visit-item:hover {
  border-color: var(--color-primary);
  box-shadow: var(--elevation-2);
  transform: translateY(-2px);
}

.visit-item-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-md);
}

.visit-item-type {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.visit-type-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: var(--radius-full);
  font-size: 1rem;
  font-weight: var(--font-weight-semibold);
}

.visit-type-badge.wellness {
  background: var(--color-success-light);
  color: var(--color-success);
}

.visit-type-badge.sick {
  background: var(--color-danger-light);
  color: var(--color-danger);
}

.visit-item-date {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.visit-item-arrow {
  font-size: 1.5rem;
  color: var(--color-primary);
  opacity: 0.5;
  transition: all var(--transition-base);
}

.visit-item:hover .visit-item-arrow {
  opacity: 1;
  transform: translateX(4px);
}

.visit-item-details {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.visit-item-detail {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
}

.visit-item-measurements {
  display: flex;
  gap: var(--spacing-md);
  flex-wrap: wrap;
  margin-top: var(--spacing-xs);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.visit-item-badge {
  display: inline-block;
  padding: var(--spacing-xs) var(--spacing-sm);
  background: var(--color-surface);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  margin-top: var(--spacing-xs);
  margin-right: var(--spacing-xs);
}

.last-visits-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--spacing-lg);
}

.last-visit-item {
  padding: var(--spacing-md);
  background: var(--color-surface);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
}

.last-visit-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-md);
  font-weight: 600;
  color: var(--color-text-primary);
}

.last-visit-icon {
  font-size: 1.5rem;
}

.last-visit-type {
  font-size: 1rem;
}

.last-visit-details {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.last-visit-date {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  font-weight: 500;
}

.last-visit-illness {
  font-size: 0.875rem;
  color: var(--color-danger);
  font-weight: 500;
  text-transform: capitalize;
}

.last-visit-location,
.last-visit-doctor {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
}

.last-visit-link {
  margin-top: var(--spacing-sm);
  color: var(--color-primary);
  text-decoration: none;
  font-size: 0.875rem;
  font-weight: 500;
  transition: color 0.2s;
}

.last-visit-link:hover {
  color: var(--color-primary-hover);
  text-decoration: underline;
}

.last-visit-empty {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  font-style: italic;
}

/* ============================================================================
   Theme Toggle
   ============================================================================ */

.theme-toggle {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-sm);
  min-width: auto;
}

.theme-toggle-icon {
  font-size: 1.125rem;
  line-height: 1;
}

.theme-toggle-text {
  font-size: 0.875rem;
}

@media (max-width: 768px) {
  .theme-toggle-text {
    display: none;
  }
}

/* ============================================================================
   Settings Page
   ============================================================================ */

.settings-layout {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.settings-section {
  margin-bottom: var(--spacing-xl);
}

.settings-section:last-child {
  margin-bottom: 0;
}

/* Support section (General tab) */
.support-section {
  margin-bottom: var(--spacing-xl);
}

.support-section-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin: 0 0 var(--spacing-sm);
}

.support-content {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: var(--spacing-sm);
}

.support-coffee-link {
  display: inline-block;
  line-height: 0;
}

.support-coffee-button {
  height: 52px;
  width: auto;
  display: block;
}

.support-text {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  margin: 0;
  line-height: 1.4;
}

.settings-label {
  display: block;
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin-bottom: var(--spacing-xs);
  font-size: var(--font-size-base);
}

.settings-description {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  margin-bottom: var(--spacing-md);
}

.settings-hint {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  font-style: italic;
  margin-top: var(--spacing-xs);
}

.theme-selector {
  display: inline-flex;
  gap: var(--spacing-sm);
  flex-wrap: wrap;
}

.theme-option {
  flex: 0 0 auto;
  min-width: 0;
  padding: var(--spacing-sm) var(--spacing-md);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-md);
  background: var(--color-background-card);
  cursor: pointer;
  transition: all var(--transition-base);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-xs);
  text-align: center;
}

.theme-option:hover {
  border-color: var(--color-primary);
  transform: translateY(-1px);
  box-shadow: var(--elevation-2);
}

.theme-option.active {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  box-shadow: var(--elevation-2);
}

.theme-option-icon {
  font-size: 1.25rem;
  line-height: 1;
}

.theme-option-label {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

.about-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-sm) 0;
  border-bottom: 1px solid var(--color-border);
}

.about-item:last-child {
  border-bottom: none;
}

.about-label {
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
}

.about-value {
  color: var(--color-text-primary);
}

/* User Info Card */
.user-info-card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--spacing-lg);
  margin-bottom: var(--spacing-lg);
}

.user-info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-sm) 0;
  border-bottom: 1px solid var(--color-border);
}

.user-info-row:last-child {
  border-bottom: none;
}

.user-info-label {
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
}

.user-info-value {
  color: var(--color-text-primary);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-base);
}

/* Expandable Settings Sections */
.settings-expandable {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  margin-bottom: var(--spacing-md);
  overflow: hidden;
  transition: border-color var(--transition-base);
}

.settings-expandable:hover {
  border-color: var(--color-primary);
}

.settings-expandable-header {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-surface);
  border: none;
  cursor: pointer;
  transition: background-color var(--transition-base);
  text-align: left;
}

.settings-expandable-header:hover {
  background: var(--color-background-card);
}

.settings-expandable-header:focus {
  outline: 2px solid var(--color-focus-ring);
  outline-offset: -2px;
}

.settings-expandable-title {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  font-size: var(--font-size-base);
}

.settings-expandable-icon {
  font-size: var(--font-size-lg);
  color: var(--color-primary);
  flex-shrink: 0;
}

.settings-expandable-chevron {
  font-size: var(--font-size-lg);
  color: var(--color-text-secondary);
  flex-shrink: 0;
  transition: transform var(--transition-base);
}

.settings-expandable-content {
  padding: var(--spacing-lg);
  background: var(--color-background);
  border-top: 1px solid var(--color-border);
}

.settings-expandable-content .form-field {
  margin-bottom: var(--spacing-md);
}

.settings-expandable-content .form-field:last-of-type {
  margin-bottom: var(--spacing-lg);
}

.settings-update-button {
  margin-top: var(--spacing-sm);
}

/* Dark mode adjustments for expandable sections */
[data-theme="dark"] .settings-expandable-header {
  background: var(--color-background-card);
}

[data-theme="dark"] .settings-expandable-header:hover {
  background: var(--color-gray-700);
}

[data-theme="dark"] .settings-expandable-content {
  background: var(--color-background);
}

[data-theme="dark"] .user-info-card {
  background: var(--color-background-card);
}

/* ============================================================================
   Family Settings page (8px grid, max-width layout, 4-card structure)
   ============================================================================ */
.family-settings-page {
  max-width: 1100px;
  margin: 0 auto;
  padding: 0 16px 32px;
}

.family-settings-page-subtitle {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  margin-bottom: 24px;
}

.family-settings-container {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.family-settings-family-section {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.family-settings-family-section + .family-settings-family-section {
  margin-top: 16px;
  padding-top: 24px;
  border-top: 1px solid var(--color-border);
}

.family-settings-card {
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  overflow: hidden;
}

.family-settings-card .card-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text-primary);
  padding: 16px 20px;
  margin: 0;
  border-bottom: 1px solid var(--color-border);
}

.family-settings-card .card-content {
  padding: 20px;
}

.family-settings-card--overview .card-content {
  padding: 16px 20px;
}

/* Overview card: subtle, compact */
.family-settings-overview {
  display: grid;
  gap: 12px;
}

.family-settings-overview-row {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 16px;
}

.family-settings-overview-label {
  font-size: 0.8125rem;
  color: var(--color-text-secondary);
}

.family-settings-overview-value {
  font-size: 0.9375rem;
  font-weight: 500;
  color: var(--color-text-primary);
}

.family-settings-overview-edit {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.family-settings-overview-edit-input {
  min-width: 160px;
  max-width: 100%;
}

.family-settings-overview-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--color-border);
}

/* Members card: structured rows */
.family-settings-members-list {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.family-settings-member-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--color-border);
  transition: background-color 0.15s ease;
}

.family-settings-member-row:last-child {
  border-bottom: none;
}

.family-settings-member-row:hover {
  background: var(--color-surface);
}

.family-settings-member-row__main {
  display: flex;
  align-items: center;
  gap: 16px;
  min-width: 0;
  flex: 1;
}

.family-settings-member-row__avatar {
  flex-shrink: 0;
}

.family-settings-member-row__info {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.family-settings-member-row__name {
  font-size: 0.9375rem;
  font-weight: 600;
  color: var(--color-text-primary);
}

.family-settings-member-row__you {
  font-weight: 400;
  color: var(--color-text-secondary);
}

.family-settings-member-row__email {
  font-size: 0.8125rem;
  color: var(--color-text-secondary);
}

.family-settings-member-row__badge {
  flex-shrink: 0;
  margin-left: auto;
}

.family-settings-member-row__role-select {
  flex-shrink: 0;
  margin-left: auto;
  width: auto;
  min-width: 120px;
  padding: var(--spacing-xs) var(--spacing-sm);
  font-size: var(--font-size-sm);
}

.family-settings-member-row__actions {
  flex-shrink: 0;
}

.family-settings-btn-remove {
  color: var(--color-danger);
  border-color: var(--color-danger);
  background: transparent;
}

.family-settings-btn-remove:hover {
  background: var(--color-danger-light);
  border-color: var(--color-danger);
}

/* Invite card: role + CTA, then link reveal */
.family-settings-invite-form {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-end;
  gap: 12px;
  margin-bottom: 0;
}

.family-settings-invite-form .form-field {
  margin-bottom: 0;
}

.family-settings-invite-helper {
  font-size: 0.8125rem;
  color: var(--color-text-secondary);
  margin-top: 12px;
  line-height: 1.4;
}

.family-settings-invite-link-box {
  margin-top: 16px;
  padding: 16px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
}

.family-settings-invite-link-label {
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--color-text-secondary);
  margin-bottom: 8px;
  display: block;
}

.family-settings-invite-link-actions {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
}

.family-settings-invite-link-code {
  font-size: 0.8125rem;
  font-family: ui-monospace, monospace;
  word-break: break-all;
  color: var(--color-text-primary);
  line-height: 1.5;
}

/* Pending invites: rows */
.family-settings-invites-list {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.family-settings-invite-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--color-border);
  transition: background-color 0.15s ease;
}

.family-settings-invite-row:last-child {
  border-bottom: none;
}

.family-settings-invite-row:hover {
  background: var(--color-surface);
}

.family-settings-invite-row__main {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.family-settings-invite-row__badge {
  flex-shrink: 0;
}

.family-settings-invite-row__expires {
  font-size: 0.8125rem;
  color: var(--color-text-secondary);
}

.family-settings-invite-row__actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.family-settings-empty {
  text-align: center;
  padding: 32px 20px;
  color: var(--color-text-secondary);
  font-size: 0.875rem;
}

.family-settings-loading {
  padding: 24px 20px;
  color: var(--color-text-secondary);
  font-size: 0.875rem;
}

.section-nav {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--spacing-lg);
  margin-top: var(--spacing-xl);
}

.section-link {
  text-decoration: none;
  color: inherit;
}

.section-link .card {
  transition: transform 0.2s, box-shadow 0.2s;
  cursor: pointer;
}

.section-link .card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.section-link h3 {
  font-size: 1.125rem;
  margin-bottom: var(--spacing-sm);
}

.section-link p {
  color: var(--color-text-secondary);
  font-size: 0.875rem;
}

/* ============================================================================
   Loading and Error States
   ============================================================================ */

.loading-spinner {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-2xl);
  gap: var(--spacing-md);
}

.spinner {
  width: 48px;
  height: 48px;
  border: 4px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.error-message {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-2xl);
  gap: var(--spacing-md);
}

.error-icon {
  font-size: 3rem;
}

.error-text {
  color: var(--color-danger);
  font-weight: 500;
  text-align: center;
}

.empty-state {
  text-align: center;
  color: var(--color-text-secondary);
  padding: var(--spacing-xl);
}

.placeholder-text {
  text-align: center;
  color: var(--color-text-secondary);
  padding: var(--spacing-xl);
  font-style: italic;
}

/* ============================================================================
   Form Components
   ============================================================================ */

.form {
  display: flex;
  flex-direction: column;
  /* gap: var(--spacing-lg); */
}

.form-field {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  margin-bottom: var(--spacing-md);
}

.form-field:last-child {
  margin-bottom: 0;
}

.form-label {
  font-weight: 600;
  font-size: 0.875rem;
  color: var(--color-text-primary);
}

.form-label.gender {
  font-weight: 600;
  font-size: 0.875rem;
  color: var(--color-text-primary);
  padding-bottom: 20px
}

/* Visit Information Form â€“ modern data entry */
.visit-info-form {
  display: flex;
  flex-direction: column;
}

.visit-info-form > .form-field {
  margin-bottom: 0;
}

.visit-info-primary {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1rem 1.25rem;
  padding-top: 1rem;
  align-items: start;
}

.visit-info-primary .form-field {
  margin-bottom: 0;
}

.visit-info-optional {
  padding-top: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

[data-theme="dark"] .visit-info-optional {
  border-top-color: rgba(255, 255, 255, 0.08);
}

.visit-info-optional-fields {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem 1.25rem;
  align-items: start;
}

.visit-info-optional-fields .form-field,
.visit-info-optional-fields .visit-info-tags-field {
  margin-bottom: 0;
}

.visit-info-tags-field {
  display: flex;
  flex-direction: column;
  gap: 0.375rem;
  min-width: 0;
}

.visit-info-tags-field .form-label {
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--color-text-secondary);
  margin-bottom: 0;
}

.visit-info-form .form-label {
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--color-text-primary);
}

.visit-info-form .form-input,
.visit-info-form .form-textarea,
.visit-info-form select.form-input {
  padding: 0.5rem 0.75rem;
  font-size: 0.9375rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
  color: var(--color-text-primary);
  transition: border-color 0.2s, box-shadow 0.2s;
}

.visit-info-form .form-input:focus,
.visit-info-form .form-textarea:focus,
.visit-info-form select.form-input:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px var(--color-primary-light);
}

.visit-info-form .form-input::placeholder {
  color: var(--color-text-secondary);
  opacity: 0.7;
}

[data-theme="dark"] .visit-info-form .form-input,
[data-theme="dark"] .visit-info-form .form-textarea,
[data-theme="dark"] .visit-info-form select.form-input {
  background: #1a1a1a;
  border-color: #333;
}

[data-theme="dark"] .visit-info-form .form-input:focus,
[data-theme="dark"] .visit-info-form .form-textarea:focus,
[data-theme="dark"] .visit-info-form select.form-input:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
}

.visit-info-form .tag-input-tags {
  padding: 0.5rem 0.75rem;
  min-height: 2.5rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
  background: var(--color-background);
  transition: border-color 0.2s, box-shadow 0.2s;
}

.visit-info-form .tag-input-tags:focus-within {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px var(--color-primary-light);
}

[data-theme="dark"] .visit-info-form .tag-input-tags {
  background: #1a1a1a;
  border-color: #333;
}

[data-theme="dark"] .visit-info-form .tag-input-tags:focus-within {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
}

.visit-info-form .tag-input-field {
  font-size: 0.9375rem;
}

.visit-info-form .tag-input-hint {
  font-size: 0.6875rem;
  color: var(--color-text-secondary);
}

@media (max-width: 768px) {
  .visit-info-primary {
    grid-template-columns: 1fr;
  }

  .visit-info-optional-fields {
    grid-template-columns: 1fr;
  }
}

.required-indicator {
  color: var(--color-danger);
  margin-left: var(--spacing-xs);
}

.form-input,
.form-textarea {
  padding: var(--spacing-sm) var(--spacing-md);
  font-size: 1rem;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-family: inherit;
  transition: border-color 0.2s;
  background-color: var(--entry-background-color);
  color: var(--color-text-primary);
}

.form-input:focus,
.form-textarea:focus {
  outline: none;
  border-color: var(--color-primary);
}

.form-input.error,
.form-textarea.error {
  border-color: var(--color-danger);
}

.form-input:disabled,
.form-textarea:disabled {
  background-color: var(--color-surface);
  cursor: not-allowed;
  opacity: 0.6;
}

.form-textarea {
  resize: vertical;
  min-height: 100px;
}

.form-error {
  color: var(--color-danger);
  font-size: 0.875rem;
  margin-top: var(--spacing-xs);
}

.form-actions {
  display: flex;
  gap: var(--spacing-md);
  margin-top: var(--spacing-md);
}

.form-actions .btn {
  min-width: 120px;
}

/* Avatar Preview */
.avatar-preview {
  margin: var(--spacing-sm) 0;
  display: flex;
  justify-content: center;
}

.avatar-preview img {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid var(--color-border);
}

/* ============================================================================
   Image Crop Upload Component
   ============================================================================ */

.image-crop-upload {
  width: 100%;
}

.upload-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-md);
}

.current-avatar-preview {
  margin-bottom: var(--spacing-sm);
}

.current-avatar-preview img {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid var(--color-border);
}

.upload-hint {
  color: var(--color-text-secondary);
  font-size: 0.875rem;
  text-align: center;
  margin: 0;
}

.cropper-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: var(--spacing-lg);
}

.cropper-container {
  background: var(--color-bg-primary);
  border-radius: var(--border-radius-lg);
  width: 100%;
  max-width: 600px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
}

.cropper-header {
  padding: var(--spacing-lg);
  border-bottom: 1px solid var(--color-border);
  text-align: center;
}

.cropper-header h3 {
  margin: 0 0 var(--spacing-xs) 0;
  color: var(--color-text-primary);
  font-size: 1.25rem;
}

.cropper-header p {
  margin: 0;
  color: var(--color-text-secondary);
  font-size: 0.875rem;
}

.cropper-area {
  position: relative;
  width: 100%;
  height: 400px;
  background: #000;
}

.cropper-controls {
  padding: var(--spacing-lg);
  border-top: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.zoom-control {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.zoom-control label {
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--color-text-primary);
}

.zoom-slider {
  width: 100%;
  height: 6px;
  border-radius: 3px;
  background: var(--color-border);
  outline: none;
  -webkit-appearance: none;
}

.zoom-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--color-primary);
  cursor: pointer;
  transition: transform 0.2s;
}

.zoom-slider::-webkit-slider-thumb:hover {
  transform: scale(1.1);
}

.zoom-slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--color-primary);
  cursor: pointer;
  border: none;
  transition: transform 0.2s;
}

.zoom-slider::-moz-range-thumb:hover {
  transform: scale(1.1);
}

.cropper-actions {
  display: flex;
  gap: var(--spacing-md);
  justify-content: flex-end;
}

.cropper-actions .btn {
  min-width: 120px;
}

@media (max-width: 768px) {
  .cropper-modal {
    padding: 0;
  }

  .cropper-container {
    max-width: 100%;
    max-height: 100vh;
    border-radius: 0;
  }

  .cropper-area {
    height: 300px;
  }

  .cropper-actions {
    flex-direction: column;
  }

  .cropper-actions .btn {
    width: 100%;
  }
}

.required {
  color: var(--color-error);
  margin-left: 2px;
}

/* ============================================================================
   Notification Component
   ============================================================================ */

.notification {
  position: fixed;
  top: var(--spacing-lg);
  right: var(--spacing-lg);
  background-color: var(--color-background);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  padding: var(--spacing-md) var(--spacing-lg);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-md);
  max-width: 400px;
  z-index: 1000;
  animation: slideIn 0.3s ease-out;
  border-left: 4px solid;
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.notification-success {
  border-left-color: #10b981;
}

.notification-error {
  border-left-color: var(--color-danger);
}

.notification-info {
  border-left-color: var(--color-primary);
}

.notification-content {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.notification-icon {
  font-size: 1.25rem;
  font-weight: bold;
}

.notification-success .notification-icon {
  color: #10b981;
}

.notification-error .notification-icon {
  color: var(--color-danger);
}

.notification-info .notification-icon {
  color: var(--color-primary);
}

.notification-message {
  font-size: 0.875rem;
  color: var(--color-text-primary);
}

.notification-close {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: 0;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color 0.2s;
}

.notification-close:hover {
  color: var(--color-text-primary);
}

/* ============================================================================
   Page Actions
   ============================================================================ */

.page-actions {
  display: flex;
  gap: var(--spacing-md);
}

/* ============================================================================
   Delete Confirmation
   ============================================================================ */

.delete-confirm {
  background-color: #fef2f2;
  border-color: var(--color-danger);
  margin-bottom: var(--spacing-xl);
}

.delete-confirm h3 {
  color: var(--color-danger);
  margin-bottom: var(--spacing-md);
}

.delete-confirm p {
  color: var(--color-text-secondary);
  margin-bottom: var(--spacing-lg);
}

/* ============================================================================
   Measurement Components
   ============================================================================ */

.measurements-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.measurement-card {
  transition: box-shadow 0.2s;
}

.measurement-card:hover {
  box-shadow: var(--shadow-md);
}

.measurement-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--spacing-lg);
  padding-bottom: var(--spacing-md);
  border-bottom: 1px solid var(--color-border);
}

.measurement-date {
  font-size: 1.125rem;
  font-weight: 600;
  margin-bottom: var(--spacing-xs);
}

.measurement-label {
  display: inline-block;
  padding: var(--spacing-xs) var(--spacing-sm);
  background-color: var(--color-surface);
  border-radius: var(--radius-sm);
  font-size: 0.75rem;
  color: var(--color-text-secondary);
  font-weight: 500;
}

.measurement-actions {
  display: flex;
  gap: var(--spacing-sm);
}

.measurement-data {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-lg);
}

.metric {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.metric-icon {
  font-size: 1.5rem;
}

.metric-content {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.metric-label {
  font-size: 0.75rem;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  font-weight: 600;
  letter-spacing: 0.5px;
}

.metric-value {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--color-text-primary);
}

.metric-percentile {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  font-weight: 400;
}

/* Measurement Form */
.measurement-section {
  padding: var(--spacing-lg);
  background-color: var(--color-surface);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
}

.section-title {
  font-size: 1rem;
  font-weight: 600;
  margin-bottom: var(--spacing-md);
  color: var(--color-text-primary);
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--spacing-lg);
}

.form-error-global {
  padding: var(--spacing-md);
  background-color: #fef2f2;
  border: 1px solid var(--color-danger);
  border-radius: var(--radius-md);
  color: var(--color-danger);
  font-size: 0.875rem;
  font-weight: 500;
}

/* ============================================================================
   Medical Events
   ============================================================================ */

.events-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.event-card {
  transition: box-shadow 0.2s;
}

.event-card:hover {
  box-shadow: var(--shadow-md);
}

.event-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--spacing-lg);
  padding-bottom: var(--spacing-md);
  border-bottom: 1px solid var(--color-border);
}

.event-title {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-md);
}

.event-icon {
  font-size: 2rem;
  line-height: 1;
}

.event-title h3 {
  font-size: 1.125rem;
  font-weight: 600;
  margin-bottom: var(--spacing-xs);
}

.event-date {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
}

.event-actions {
  display: flex;
  gap: var(--spacing-sm);
}

.event-description {
  color: var(--color-text-secondary);
  line-height: 1.6;
}

.event-description p {
  margin: 0;
  white-space: pre-wrap;
}

/* Select dropdown styling */
select.form-input {
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2364748b' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.75rem center;
  padding-right: 2.5rem;
  cursor: pointer;
  background-color: var(--color-background-card);
  color: var(--color-text-primary);
}

[data-theme="dark"] select.form-input {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23a3a3a3' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
}

select.form-input option {
  background-color: var(--color-background-card);
  color: var(--color-text-primary);
}

select.form-input:disabled {
  cursor: not-allowed;
}

/* Chart styles */
.chart-header {
  margin-bottom: var(--spacing-lg);
}

/* Chart info card - used for dashboard info section */
.chart-info {
  background-color: var(--color-surface);
}

.chart-info h3 {
  font-size: 1rem;
  font-weight: 600;
  margin-bottom: var(--spacing-md);
}

.chart-info ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.chart-info li {
  padding: var(--spacing-sm) 0;
  color: var(--color-text-secondary);
}

.chart-info li strong {
  color: var(--color-text-primary);
}

.charts-dashboard {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-2xl);
}

.chart-section {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.section-heading {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-text-primary);
  margin: 0;
  padding-bottom: var(--spacing-md);
  border-bottom: 2px solid var(--color-border);
}

.chart-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(min(100%, 400px), 1fr));
  gap: var(--spacing-lg);
}

.chart-container {
  width: 100%;
}

.chart-header h3 {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin: 0 0 var(--spacing-sm) 0;
}

.chart-description {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  line-height: 1.5;
  margin: 0 0 var(--spacing-lg) 0;
  font-style: italic;
}

.chart-body {
  width: 100%;
}

.chart-empty {
  text-align: center;
  padding: var(--spacing-2xl);
  color: var(--color-text-secondary);
  font-size: 0.875rem;
}

/* Latest Growth Snapshot */
.snapshot-date {
  text-align: center;
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  margin-bottom: var(--spacing-lg);
}

.snapshot-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-lg);
}

.snapshot-card {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  padding: var(--spacing-lg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  background-color: var(--color-surface);
}

.snapshot-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-xs);
}

.snapshot-icon {
  font-size: 1.5rem;
}

.snapshot-label {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.snapshot-value {
  font-size: 2rem;
  font-weight: 700;
  color: var(--color-text-primary);
  display: flex;
  align-items: baseline;
  gap: var(--spacing-sm);
}

.snapshot-change {
  font-size: 0.875rem;
  font-weight: 600;
  padding: 0.125rem 0.5rem;
  border-radius: var(--radius-sm);
}

.snapshot-change.positive {
  color: var(--color-success);
  background-color: #dcfce7;
}

.snapshot-change.negative {
  color: var(--color-danger);
  background-color: #fee2e2;
}

.snapshot-percentile {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
}

.snapshot-empty {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  font-style: italic;
}

/* ============================================================================
   Illnesses Page
   ============================================================================ */

.filters-card {
  margin-bottom: var(--spacing-md);
}

.filters-toolbar {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: var(--spacing-lg);
  flex-wrap: wrap;
}

.filters-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-md);
  flex: 1;
  min-width: 0;
}

.filters-actions {
  display: flex;
  align-items: center;
  flex-shrink: 0;
}

.filter-group {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.filter-group label {
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
}

.filter-group select {
  padding: var(--spacing-sm);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  background-color: var(--color-background);
  color: var(--color-text-primary);
  font-size: var(--font-size-base);
}

.illnesses-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.illness-item {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: var(--spacing-md);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  background-color: var(--color-background-card);
  transition: box-shadow 0.2s, border-color 0.2s;
}

.illness-item:hover {
  box-shadow: var(--elevation-2);
  border-color: var(--color-primary);
}

.illness-item-content {
  flex: 1;
}

.illness-item-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-sm);
}

.illness-item-header h3 {
  margin: 0;
  font-size: 1.125rem;
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
}

.illness-type-badge {
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  background-color: var(--color-danger-light);
  color: var(--color-danger);
}

.illness-item-details {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.illness-detail-row {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.illness-detail-row strong {
  color: var(--color-text-primary);
  margin-right: var(--spacing-xs);
}

.ongoing-badge {
  color: var(--color-warning);
  font-weight: var(--font-weight-medium);
}

.visit-link {
  color: var(--color-primary);
  text-decoration: none;
}

.visit-link:hover {
  text-decoration: underline;
}

.severity-display {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  margin-left: var(--spacing-xs);
  font-size: 1.1rem;
  font-weight: var(--font-weight-medium);
}

.illness-item-actions {
  display: flex;
  gap: var(--spacing-sm);
  flex-shrink: 0;
}

/* ============================================================================
   Metrics Page
   ============================================================================ */

.metrics-controls {
  margin-bottom: var(--spacing-lg);
}

.metrics-controls-inline {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
  flex-wrap: wrap;
}

.metrics-avatar-section {
  display: flex;
  align-items: center;
  margin-left: auto; /* Push to the right */
}

.avatar-mashup {
  display: flex;
  gap: var(--spacing-xs);
  align-items: center;
}

.avatar-mashup-item {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--color-border);
  margin-left: -6px; /* Overlap avatars slightly */
  background: var(--color-background-card);
}

.avatar-mashup-item:first-child {
  margin-left: 0;
}

.avatar-mashup-single {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--color-border);
}

.metrics-controls-divider {
  width: 1px;
  height: 32px;
  background: var(--color-border);
  flex-shrink: 0;
}

.metrics-year-section,
.metrics-filter-section {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.metrics-control-label {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  white-space: nowrap;
}

.year-selector {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: 2px;
}

.year-selector .btn {
  padding: var(--spacing-xs);
  min-width: 32px;
  height: 32px;
}

.year-display {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  min-width: 60px;
  text-align: center;
  padding: 0 var(--spacing-xs);
}

.metrics-filter-section .modern-select-wrapper {
  flex-direction: row;
  align-items: center;
  gap: var(--spacing-sm);
}

.metrics-filter-section .modern-select {
  min-width: 160px;
  padding: var(--spacing-xs) var(--spacing-sm);
  font-size: var(--font-size-sm);
}

.metrics-filter-section .modern-select-label {
  display: none;
}

.metrics-summary {
  display: grid;
  grid-template-columns: auto 1fr 1fr 1fr 1fr;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
  align-items: stretch;
  overflow-x: auto;
}

@media (max-width: 1600px) {
  .metrics-summary {
    grid-template-columns: auto repeat(auto-fit, minmax(140px, 1fr));
  }
}

@media (max-width: 768px) {
  .metrics-summary {
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
  }
}

.summary-card {
  text-align: center;
  padding: var(--spacing-lg);
}

.summary-card-avatars {
  min-width: 150px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
}

.summary-avatars {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
}

.summary-avatar-item {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--color-border);
  margin-left: -8px;
  background: var(--color-background-card);
}

.summary-avatar-item:first-child {
  margin-left: 0;
}

.summary-avatar-single {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--color-border);
}

.summary-value {
  font-size: 1.2rem;
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
  margin-bottom: var(--spacing-xs);
}

.summary-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.heatmap-description {
  margin-bottom: var(--spacing-lg);
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
}

.heatmap-container {
  margin: var(--spacing-lg) 0;
}

.heatmap-grid {
  display: flex;
  gap: var(--spacing-xs);
  overflow-x: auto;
  padding-bottom: var(--spacing-md);
}

.heatmap-day-labels {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  margin-right: var(--spacing-sm);
  /* CRITICAL: Must align perfectly with cell rows - no padding */
  padding: 0;
  justify-content: flex-start;
}

.heatmap-day-label {
  height: 12px;
  font-size: 0.75rem;
  color: var(--color-text-secondary);
  text-align: right;
  padding-right: var(--spacing-xs);
  display: flex;
  align-items: center;
  justify-content: flex-end;
  /* CRITICAL: Must match heatmap-cell height and gap exactly */
  min-height: 12px;
  max-height: 12px;
  line-height: 12px;
  margin: 0;
}

.heatmap-weeks {
  display: flex;
  gap: var(--spacing-xs);
}

.heatmap-week {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  align-items: stretch;
  /* CRITICAL: Each week must have exactly 7 cells, one per day of week */
  padding: 0;
  margin: 0;
}

.heatmap-cell {
  width: 12px;
  height: 12px;
  border-radius: 2px;
  cursor: pointer;
  transition: transform 0.1s, box-shadow 0.1s;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.heatmap-cell-empty {
  cursor: default;
  background-color: transparent;
  opacity: 0;
  /* Maintain size to preserve alignment */
  width: 12px;
  height: 12px;
}

.heatmap-cell:hover {
  transform: scale(1.2);
  box-shadow: 0 0 0 2px var(--color-primary);
  z-index: 1;
  position: relative;
}

.heatmap-cell-content {
  font-size: 0.5rem;
  color: var(--color-text-primary);
  font-weight: var(--font-weight-bold);
}

.heatmap-legend {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-top: var(--spacing-lg);
  justify-content: flex-end;
}

.heatmap-legend-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.heatmap-legend-colors {
  display: flex;
  gap: 2px;
}

.heatmap-legend-cell {
  width: 12px;
  height: 12px;
  border-radius: 2px;
}

/* Severity Selector */
.severity-selector {
  margin-bottom: var(--spacing-md);
}

.severity-selector .form-label {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.form-label-hint {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-weight: normal;
}

.severity-options {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
  margin-top: var(--spacing-sm);
}

.severity-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 50px;
  height: 60px;
  padding: var(--spacing-xs);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-md);
  background-color: var(--color-background-card);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 1.2rem;
}

.severity-option:hover:not(:disabled) {
  border-color: var(--color-primary);
  background-color: var(--color-surface);
  transform: scale(1.05);
}

.severity-option.selected {
  border-color: var(--color-primary);
  background-color: var(--color-primary);
  color: white;
}

.severity-option:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.severity-emoji {
  font-size: 1.5rem;
  line-height: 1;
  margin-bottom: var(--spacing-xs);
}

.severity-number {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-bold);
}

.severity-clear {
  padding: var(--spacing-sm) var(--spacing-md);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-md);
  background-color: var(--color-background-card);
  color: var(--color-text-primary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: var(--font-size-sm);
}

.severity-clear:hover:not(:disabled) {
  border-color: var(--color-danger);
  color: var(--color-danger);
}

.severity-clear:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.severity-selected {
  margin-top: var(--spacing-sm);
  padding: var(--spacing-sm);
  background-color: var(--color-surface);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

/* Modern Select Component */
.modern-select-wrapper {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.modern-select-label {
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
}

.modern-select {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-sm) var(--spacing-md);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  background-color: var(--color-background-card);
  color: var(--color-text-primary);
  cursor: pointer;
  transition: border-color 0.2s, background-color 0.2s;
  min-height: 40px;
}

.modern-select:hover:not(.disabled) {
  border-color: var(--color-primary);
}

.modern-select.open {
  border-color: var(--color-primary);
}

.modern-select.disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.modern-select-value {
  flex: 1;
  text-align: left;
}

.modern-select-icon {
  margin-left: var(--spacing-sm);
  transition: transform 0.2s;
  flex-shrink: 0;
}

.modern-select-icon.open {
  transform: rotate(180deg);
}

.modern-select-menu {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  right: 0;
  background-color: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 1000;
  max-height: 200px;
  overflow-y: auto;
  margin-top: var(--spacing-xs);
}

.modern-select-option {
  padding: var(--spacing-sm) var(--spacing-md);
  cursor: pointer;
  transition: background-color 0.2s;
  color: var(--color-text-primary);
}

.modern-select-option:hover {
  background-color: var(--color-surface);
}

.modern-select-option.selected {
  background-color: var(--color-primary);
  color: white;
}

.day-details {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.day-details ul {
  margin: var(--spacing-sm) 0 0 var(--spacing-lg);
  padding: 0;
}

.day-details li {
  margin-bottom: var(--spacing-xs);
  color: var(--color-text-secondary);
}

/* Recharts customizations */
.recharts-wrapper {
  font-family: var(--font-family);
}

.recharts-cartesian-axis-tick {
  font-size: 0.875rem;
}

.recharts-legend-wrapper {
  padding-top: var(--spacing-md);
}

.recharts-tooltip-wrapper {
  z-index: 10;
}

.recharts-reference-line-label {
  font-size: 0.75rem;
}

.recharts-reference-area {
  opacity: 0.3;
}

/* ============================================================================
   Responsive Design
   ============================================================================ */

@media (max-width: 768px) {
  .app-header {
    padding: var(--spacing-sm);
  }
  
  .header-content {
    padding: var(--spacing-sm) var(--spacing-md);
  }
  
  .app-title {
    font-size: 1rem;
  }
  
  .app-logo {
    height: 20px;
  }
  
  .app-main {
    padding: var(--spacing-lg) var(--spacing-md);
  }
  
  .page-header {
    flex-direction: column;
    gap: var(--spacing-md);
  }
  
  .page-actions {
    width: 100%;
  }
  
  .page-actions .btn {
    flex: 1;
  }
  
  .children-grid-cards {
    grid-template-columns: 1fr;
  }

  .child-card-compact .card-content {
    flex-direction: column-reverse;
    text-align: center;
  }

  .child-card-header {
    justify-content: center;
  }

  .child-card-details {
    align-items: center;
  }

  .child-avatar-large {
    width: 80px;
    height: 80px;
  }

  .child-name {
    font-size: 1.125rem;
  }
  
  .section-nav {
    grid-template-columns: 1fr;
  }
  
  .form-actions {
    flex-direction: column;
  }
  
  .form-actions .btn {
    width: 100%;
  }
  
  .notification {
    left: var(--spacing-md);
    right: var(--spacing-md);
    max-width: none;
  }
  
  .measurement-header {
    flex-direction: column;
    gap: var(--spacing-md);
  }
  
  .measurement-actions {
    width: 100%;
  }
  
  .measurement-actions .btn {
    flex: 1;
  }
  
  .measurement-data {
    grid-template-columns: 1fr;
  }
  
  .form-row {
    grid-template-columns: 1fr;
  }
  
  .chart-footer {
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-sm);
  }
  
  .event-header {
    flex-direction: column;
    gap: var(--spacing-md);
  }
  
  .event-actions {
    width: 100%;
  }
  
  .event-actions .btn {
    flex: 1;
  }
  
  .visit-detail-header {
    flex-direction: column;
    gap: var(--spacing-md);
    align-items: stretch;
  }
  
  .visit-detail-actions {
    width: 100%;
  }
  
  .visit-detail-actions .btn {
    flex: 1;
  }
  
  .visit-info-item {
    flex-direction: column;
    gap: var(--spacing-xs);
  }
  
  .visit-info-label {
    min-width: auto;
  }
  
  .visit-measurements-compact {
    flex-direction: column;
    gap: var(--spacing-sm);
  }
  
  .visit-vaccines-compact {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .visit-history-entry-compact {
    flex-wrap: wrap;
    gap: var(--spacing-xs);
  }
  
  .visit-history-date-compact {
    margin-left: 0;
    margin-right: 0;
    width: 100%;
    order: 2;
  }
  
  .visit-history-user-compact {
    width: 100%;
    order: 3;
  }
}

/* ============================================================================
   File Upload and Attachments
   ============================================================================ */

.file-upload {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-lg);
}

.upload-error {
  color: var(--color-danger);
  font-size: 0.875rem;
  padding: var(--spacing-sm);
  background-color: #fee2e2;
  border-radius: var(--radius-sm);
}

.upload-hint {
  font-size: 0.75rem;
  color: var(--color-text-secondary);
}

.attachments-section {
  margin-top: var(--spacing-lg);
}

.pending-attachments {
  margin-bottom: var(--spacing-md);
  padding-bottom: var(--spacing-md);
  border-bottom: 1px solid var(--color-border);
}

.pending-attachments h4 {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--color-text-primary);
}

.attachments-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  margin-top: var(--spacing-md);
}

.attachments-empty {
  text-align: center;
  padding: var(--spacing-xl);
  color: var(--color-text-secondary);
  font-style: italic;
}

.attachment-item {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  background-color: var(--color-surface);
  transition: background-color 0.2s;
}

.attachment-item .attachment-icon {
  margin-top: 2px;
  align-self: flex-start;
}

.attachment-item:hover {
  background-color: var(--color-border);
}

.attachment-item-compact {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  background-color: var(--color-surface);
  transition: background-color 0.2s;
  margin-bottom: var(--spacing-md);
}

.attachment-item-compact:hover {
  background-color: var(--color-border);
}

.attachment-icon {
  font-size: 2rem;
  flex-shrink: 0;
  align-self: flex-start;
  margin-top: 2px;
  line-height: 1;
}

.attachment-icon-compact {
  font-size: 1.25rem;
  flex-shrink: 0;
}

.attachment-image-preview {
  width: 48px;
  height: 48px;
  flex-shrink: 0;
  border-radius: var(--radius-sm);
  overflow: hidden;
  background: var(--color-surface);
  display: flex;
  align-items: center;
  justify-content: center;
}

.attachment-preview-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.attachment-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.attachment-info-compact {
  flex: 1;
  min-width: 0;
}

.attachment-filename-link {
  background: none;
  border: none;
  color: var(--color-primary);
  text-decoration: none;
  cursor: pointer;
  font-size: inherit;
  font-family: inherit;
  padding: 0;
  text-align: left;
  display: inline;
}

.attachment-filename-link:hover {
  text-decoration: underline;
}

.attachment-filename {
  color: var(--color-primary);
  text-decoration: none;
  font-weight: 500;
  word-break: break-word;
}

.attachment-filename:hover {
  text-decoration: underline;
}

.attachment-meta {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  margin-top: var(--spacing-xs);
}

.attachment-meta-compact {
  font-size: 0.7rem;
  color: var(--color-text-secondary);
  margin-top: 2px;
}

.attachment-filename-link-compact {
  background: none;
  border: none;
  color: var(--color-primary);
  text-decoration: none;
  cursor: pointer;
  font-size: 0.875rem;
  padding: 0;
  text-align: left;
}

.attachment-filename-link-compact:hover {
  text-decoration: underline;
}

.attachment-actions-compact {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  flex-shrink: 0;
}

.btn-icon-small {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  padding: 0;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  background: var(--color-background);
  color: var(--color-text-primary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 0.875rem;
}

.btn-icon-small:hover {
  background: var(--color-primary);
  color: white;
  border-color: var(--color-primary);
}

.btn-icon-small.btn-danger:hover {
  background: var(--color-danger);
  border-color: var(--color-danger);
  color: white;
}

.attachment-edit-form {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  flex: 1;
}

.attachment-edit-input {
  flex: 1;
  padding: var(--spacing-xs) var(--spacing-sm);
  border: 1px solid var(--color-primary);
  border-radius: var(--radius-sm);
  background: var(--color-background);
  color: var(--color-text-primary);
  font-size: 0.875rem;
}

.btn-delete-attachment {
  background: none;
  border: none;
  font-size: 1.25rem;
  cursor: pointer;
  padding: var(--spacing-xs);
  opacity: 0.6;
  transition: opacity 0.2s;
  flex-shrink: 0;
}

.btn-delete-attachment:hover:not(:disabled) {
  opacity: 1;
}

.btn-delete-attachment:disabled {
  cursor: not-allowed;
  opacity: 0.3;
}

@media (max-width: 640px) {
  .attachment-item {
    flex-wrap: wrap;
  }
  
  .attachment-info {
    flex: 1 1 100%;
  }
  
  .btn-delete-attachment {
    margin-left: auto;
  }
}

/* ============================================================================
   Visits Styles
   ============================================================================ */

.visit-filters {
  display: flex;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-lg);
}

.filter-btn {
  padding: var(--spacing-sm) var(--spacing-md);
  border: 2px solid var(--color-border);
  background: white;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s;
}

.filter-btn:hover {
  border-color: var(--color-primary);
}

.filter-btn.active {
  background: var(--color-primary);
  color: white;
  border-color: var(--color-primary);
}

.visits-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.visit-card-link {
  text-decoration: none;
  color: inherit;
}

.visit-card {
  transition: transform 0.2s, box-shadow 0.2s;
  cursor: pointer;
}

.visit-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.visit-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-sm);
}

.visit-type-badge {
  display: inline-block;
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-sm);
  font-size: 0.875rem;
  font-weight: 600;
  margin-bottom: var(--spacing-xs);
}

.visit-type-badge.wellness {
  background: #d1fae5;
  color: #065f46;
}

.visit-type-badge.sick {
  background: #fee2e2;
  color: #991b1b;
}

.visit-date {
  margin: 0;
  font-size: 1.125rem;
}

.visit-arrow {
  font-size: 1.5rem;
  color: var(--color-primary);
  opacity: 0.5;
  transition: opacity 0.2s, transform 0.2s;
}

.visit-card:hover .visit-arrow {
  opacity: 1;
  transform: translateX(4px);
}

.visit-illness,
.visit-detail {
  margin-bottom: var(--spacing-xs);
  font-size: 0.875rem;
  color: var(--color-text-secondary);
}

.visit-measurements,
.visit-vaccines,
.visit-prescriptions {
  display: flex;
  gap: var(--spacing-md);
  margin-top: var(--spacing-sm);
  font-size: 0.875rem;
  color: var(--color-text-secondary);
}

.measurement-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-md);
}

/* Measurements UI â€“ 8/12px spacing, 2-col grid, dark-mode friendly */
:root {
  --m-space-1: 8px;
  --m-space-2: 12px;
  --m-space-3: 16px;
}

.measurements-ui {
  display: flex;
  flex-direction: column;
  gap: var(--m-space-2);
}

.measurements-cards {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--m-space-2);
  align-items: stretch;
}

.measurements-add-row {
  display: flex;
  flex-wrap: wrap;
  gap: var(--m-space-1);
  padding-top: var(--m-space-1);
}

[data-theme="dark"] .measurements-add-row {
  border-top-color: #2a2a2a;
}

.measurement-card {
  display: flex;
  flex-direction: column;
  min-width: 0;
  min-height: 0;
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  background: var(--color-background-card);
  box-shadow: var(--elevation-0);
  transition: border-color 0.2s, box-shadow 0.2s;
}

.measurement-card:hover {
  border-color: var(--color-border);
  box-shadow: var(--elevation-1);
}

[data-theme="dark"] .measurement-card {
  background: #161616;
  border-color: #2a2a2a;
}

[data-theme="dark"] .measurement-card:hover {
  border-color: #333;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
}

.measurement-card-header {
  display: flex;
  align-items: center;
  gap: var(--m-space-1);
  width: 100%;
  padding: var(--m-space-2) var(--m-space-2);
  background: transparent;
  border: none;
  border-bottom: 1px solid var(--color-border);
  text-align: left;
  min-height: 44px;
}

[data-theme="dark"] .measurement-card-header {
  border-bottom-color: #2a2a2a;
}

.measurement-card-header.has-value {
  font-weight: 600;
}

.measurement-card-icon {
  font-size: 1rem;
  line-height: 1;
  opacity: 0.85;
  flex-shrink: 0;
}

.measurement-card-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text-primary);
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.measurement-card-remove {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  padding: 0;
  margin-left: auto;
  flex-shrink: 0;
  border: none;
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--color-text-secondary);
  font-size: 1.25rem;
  line-height: 1;
  cursor: pointer;
  transition: background-color 0.2s, color 0.2s;
}

.measurement-card-remove:hover:not(:disabled) {
  background: var(--color-danger-light);
  color: var(--color-danger);
}

.measurement-card-remove:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

[data-theme="dark"] .measurement-card-remove:hover:not(:disabled) {
  background: rgba(239, 68, 68, 0.2);
  color: var(--color-danger);
}

.measurement-card-body {
  display: block;
  overflow: hidden;
}

.measurement-card-inner {
  min-height: 0;
  padding: var(--m-space-2);
  background: var(--color-surface);
  border-top: 1px solid var(--color-border);
}

[data-theme="dark"] .measurement-card-inner {
  background: #1a1a1a;
  border-top-color: #2a2a2a;
}

.measurement-fields {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: var(--m-space-2);
  align-items: start;
}

.measurement-field {
  display: flex;
  flex-direction: column;
  gap: var(--m-space-1);
}

.measurement-field-label {
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--color-text-secondary);
  letter-spacing: 0.02em;
}

.measurement-input-with-suffix {
  display: flex;
  align-items: stretch;
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
  background: var(--color-background);
  overflow: hidden;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.measurement-input-with-suffix:focus-within {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px var(--color-primary-light);
}

[data-theme="dark"] .measurement-input-with-suffix {
  background: #0f0f0f;
  border-color: #333;
}

[data-theme="dark"] .measurement-input-with-suffix:focus-within {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
}

.measurement-input {
  flex: 1;
  min-width: 0;
  padding: var(--m-space-1) var(--m-space-2);
  font-size: 1rem;
  font-weight: 500;
  color: var(--color-text-primary);
  background: transparent;
  border: none;
  outline: none;
}

.measurement-input::placeholder {
  color: var(--color-text-secondary);
  opacity: 0.7;
  font-weight: 400;
}

.measurement-suffix {
  padding: var(--m-space-1) var(--m-space-2);
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--color-text-secondary);
  background: var(--color-surface);
  border-left: 1px solid var(--color-border);
  white-space: nowrap;
}

[data-theme="dark"] .measurement-suffix {
  background: #1c1c1c;
  border-left-color: #333;
}

.measurement-field-helper {
  font-size: 0.6875rem;
  color: var(--color-text-secondary);
  opacity: 0.85;
}

.measurement-card-add {
  display: inline-flex;
  align-items: center;
  gap: var(--m-space-1);
  padding: var(--m-space-1) var(--m-space-2);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: transform 0.2s ease;
  font: inherit;
  color: var(--color-text-secondary);
}

.measurement-card-add:hover:not(:disabled) {
  transform: translateY(-2px);
}

.measurement-card-add:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.measurement-card-add .measurement-card-icon {
  opacity: 0.7;
}

.measurement-card-add:hover:not(:disabled) .measurement-card-icon {
  opacity: 1;
}

.measurement-card-add-label {
  font-size: 0.8125rem;
  font-weight: 500;
}

[data-theme="dark"] .measurement-card-add {
  background: #1a1a1a;
  border-color: #333;
}

/* Vision section â€“ Refraction card full width; checkboxes below, outside card */
.vision-ui.measurements-ui .vision-refraction-cards {
  grid-template-columns: 1fr;
  margin-bottom: var(--m-space-2);
}

.vision-checkboxes {
  display: flex;
  flex-direction: column;
  gap: var(--m-space-2);
}

.vision-checkboxes .modern-checkbox-wrapper {
  margin-bottom: 0;
}

.vision-refraction-fields {
  display: grid;
  grid-template-columns: auto repeat(3, 1fr);
  gap: var(--m-space-2);
  align-items: end;
}

.vision-refraction-row {
  display: contents;
}

.vision-refraction-row-header .measurement-field-label {
  margin-bottom: 0;
}

.vision-refraction-eye-label {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--color-text-primary);
  padding-bottom: var(--m-space-1);
}

.vision-refraction-row-header .vision-refraction-eye-label {
  padding-bottom: 0;
}

.vision-refraction-notes-field {
  margin-top: var(--m-space-2);
}

.vision-input-textarea {
  display: block;
  width: 100%;
  min-height: 60px;
  padding: var(--m-space-1) var(--m-space-2);
  font-size: 1rem;
  font-weight: 500;
  color: var(--color-text-primary);
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  resize: vertical;
  transition: border-color 0.2s, box-shadow 0.2s;
  font-family: inherit;
}

.vision-input-textarea::placeholder {
  color: var(--color-text-secondary);
  opacity: 0.7;
  font-weight: 400;
}

.vision-input-textarea:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px var(--color-primary-light);
}

[data-theme="dark"] .vision-input-textarea {
  background: #0f0f0f;
  border-color: #333;
}

[data-theme="dark"] .vision-input-textarea:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
}

.vision-ui .visually-hidden {
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

@media (max-width: 768px) {
  .measurements-cards {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 500px) {
  .measurements-cards {
    grid-template-columns: 1fr;
  }
}

.vaccine-section-compact {
  padding: var(--spacing-md);
}

.vaccine-section-compact .vaccine-input {
  margin-bottom: 0;
}

.vaccine-section-compact .vaccine-item {
  padding: var(--spacing-sm);
  margin-bottom: var(--spacing-sm);
}

.vaccine-section-compact .vaccine-actions {
  gap: var(--spacing-xs);
}

.vaccine-section-compact .vaccine-actions button {
  padding: var(--spacing-xs) var(--spacing-sm);
  font-size: 0.875rem;
}

.visit-detail-body {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

/* No bottom space after last section in form body */
.visit-form-body-cell.visit-detail-body > *:last-child.visit-detail-section {
  padding-bottom: 0 !important;
  margin-bottom: 0 !important;
}

.visit-detail-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.visit-detail-header .breadcrumb {
  margin-bottom: 0;
}

.visit-detail-actions {
  display: flex;
  gap: var(--spacing-sm);
  flex-shrink: 0;
}

.visit-tab-content {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.visit-header-title {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin: 0 0 var(--spacing-xs) 0;
}

.visit-header-date {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  margin: 0;
}

.visit-section-header {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 var(--spacing-md) 0;
  padding-bottom: var(--spacing-xs);
  border-bottom: 1px solid var(--color-border);
}

.visit-title-badge {
  display: inline-block;
  padding: 4px 12px;
  background: var(--color-primary-light);
  color: var(--color-primary);
  border-radius: var(--radius-md);
  font-size: 0.875rem;
  font-weight: 500;
}

.visit-info-stacked {
  display: flex;
  flex-direction: column;
}

.visit-info-item {
  display: flex;
  gap: var(--spacing-sm);
  align-items: baseline;
}

.visit-info-label {
  font-weight: 600;
  color: var(--color-text-secondary);
  min-width: 100px;
  font-size: 0.875rem;
}

.visit-info-value {
  color: var(--color-text-primary);
  flex: 1;
}

.visit-measurements-section {
  padding: var(--spacing-sm) 0;
}

.visit-measurements-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: var(--spacing-md);
}

.measurement-card {
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  text-align: center;
  transition: all 0.2s ease;
  margin-bottom: var(--spacing-md);
}

.measurement-card:hover {
  border-color: var(--color-primary);
  box-shadow: var(--shadow-sm);
}

.measurement-card-label {
  font-size: 0.75rem;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: var(--spacing-xs);
  font-weight: 500;
}

.measurement-card-value {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin-bottom: var(--spacing-xs);
}

.measurement-card-percentile {
  font-size: 0.75rem;
  color: var(--color-primary);
  font-weight: 500;
}

.measurement-compact {
  display: flex;
  gap: var(--spacing-xs);
  align-items: baseline;
  font-size: 0.875rem;
}

.measurement-compact-label {
  font-weight: 600;
  color: var(--color-text-secondary);
}

.measurement-compact-value {
  color: var(--color-text-primary);
}

.visit-vaccines-compact {
  display: flex;
  gap: var(--spacing-sm);
  align-items: center;
  flex-wrap: wrap;
  padding: var(--spacing-sm) 0;
}

.visit-vaccines-label {
  font-weight: 600;
  color: var(--color-text-secondary);
  font-size: 0.875rem;
}

.visit-vaccines-badges {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
}

.vaccine-badge-compact {
  display: inline-block;
  padding: 2px 8px;
  background: var(--color-primary-light);
  color: var(--color-primary);
  border-radius: var(--radius-sm);
  font-size: 0.75rem;
  font-weight: 500;
}

.visit-prescriptions-compact {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  padding: var(--spacing-sm) 0;
  font-size: 0.875rem;
}

.prescription-compact {
  color: var(--color-text-primary);
}

.prescription-notes {
  color: var(--color-text-secondary);
  font-style: italic;
}

.visit-notes-section {
  padding: var(--spacing-sm) 0;
}

.visit-notes-text {
  color: var(--color-text-primary);
  line-height: 1.6;
  margin: 0;
  white-space: pre-wrap;
}

.visit-history-list-compact {
  display: flex;
  flex-direction: column;
}

.visit-history-entry-compact {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-size: 0.875rem;
  border-bottom: 1px solid var(--color-border);
}

.visit-history-entry-compact:last-child {
  border-bottom: none;
}

.visit-history-icon-compact {
  flex-shrink: 0;
  width: 20px;
  text-align: center;
}

.visit-history-description-compact {
  flex: 1;
  color: var(--color-text-primary);
}

.visit-history-date-compact {
  color: var(--color-text-secondary);
  font-size: 0.8125rem;
  margin-left: auto;
  margin-right: var(--spacing-sm);
}

.visit-history-user-compact {
  color: var(--color-text-secondary);
  font-size: 0.8125rem;
  font-style: italic;
}

/* Clickable history row (opens detail modal) */
.visit-history-entry-clickable {
  width: 100%;
  text-align: left;
  cursor: pointer;
  border: none;
  background: transparent;
  font-family: inherit;
  transition: background-color 0.15s ease, border-radius 0.15s ease;
}

.visit-history-entry-clickable:hover {
  background: var(--color-gray-50);
}

[data-theme="dark"] .visit-history-entry-clickable:hover {
  background: var(--color-surface);
}

.visit-history-entry-clickable:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

.visit-history-chevron {
  flex-shrink: 0;
  font-size: 1.25rem;
  color: var(--color-text-tertiary, var(--color-text-secondary));
  opacity: 0.7;
  transition: transform 0.2s ease;
}

.visit-history-entry-clickable:hover .visit-history-chevron {
  transform: translateX(2px);
  opacity: 1;
}

/* History detail modal (popup when clicking a row) */
.history-detail-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-modal-backdrop, 1040);
  padding: var(--spacing-lg);
  animation: history-overlay-in 0.2s ease;
}

@keyframes history-overlay-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.history-detail-modal {
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  box-shadow: 0 24px 48px rgba(0, 0, 0, 0.12), 0 8px 16px rgba(0, 0, 0, 0.08);
  max-width: 520px;
  width: 100%;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  animation: history-modal-in 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
}

[data-theme="dark"] .history-detail-modal {
  box-shadow: 0 24px 48px rgba(0, 0, 0, 0.35);
}

@keyframes history-modal-in {
  from {
    opacity: 0;
    transform: scale(0.96) translateY(-8px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.history-detail-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--spacing-md);
  padding: var(--spacing-lg) var(--spacing-lg) 0;
  flex-shrink: 0;
}

.history-detail-title {
  margin: 0;
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--color-text-primary);
  line-height: 1.35;
  flex: 1;
  min-width: 0;
}

.history-detail-close {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--color-text-secondary);
  font-size: 1.75rem;
  line-height: 1;
  cursor: pointer;
  border-radius: 10px;
  transition: background-color 0.15s ease, color 0.15s ease;
}

.history-detail-close:hover {
  background: var(--color-surface);
  color: var(--color-text-primary);
}

.history-detail-meta {
  padding: var(--spacing-sm) var(--spacing-lg) 0;
  font-size: 0.8125rem;
  color: var(--color-text-secondary);
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  flex-wrap: wrap;
}

.history-detail-date {
  font-variant-numeric: tabular-nums;
}

.history-detail-sep {
  opacity: 0.6;
}

.history-detail-body {
  padding: var(--spacing-lg);
  overflow-y: auto;
  flex: 1;
  min-height: 0;
}

.history-detail-body .audit-diff {
  padding: var(--spacing-md);
  margin: 0;
}

.history-detail-empty {
  margin: 0;
  font-size: 0.9375rem;
  color: var(--color-text-secondary);
  font-style: italic;
}

.visit-attachments-tab {
  padding: var(--spacing-sm) 0;
}

.visit-detail-section {
  padding-bottom: var(--spacing-md);
  border-bottom: 1px solid var(--color-border);
}

/* Remove ALL bottom space from last section â€“ no gap at bottom of form */
.visit-detail-section-last,
.visit-detail-section:last-child,
.visit-form-body-cell.visit-detail-body > .visit-detail-section:last-child,
.visit-form-body-cell.visit-detail-body > section.visit-detail-section:last-of-type,
.visit-form-body-cell.visit-detail-body > section:last-of-type.visit-detail-section {
  border-bottom: none !important;
  padding-bottom: 0 !important;
  margin-bottom: 0 !important;
}

.visit-detail-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-md);
}

.visit-detail-section-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin: 0;
  padding-bottom: var(--spacing-xs);
  border-bottom: 2px solid var(--color-primary);
  display: inline-block;
}

.visit-detail-section-remove {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  padding: 0;
  border: none;
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--color-text-secondary);
  font-size: 1.125rem;
  line-height: 1;
  cursor: pointer;
  transition: background-color 0.2s, color 0.2s;
}

.visit-detail-section-remove:hover {
  background: var(--color-danger-light);
  color: var(--color-danger);
}

.visit-detail-section-body {
  /* Section content */
}

/* No bottom margin on last child inside any section body (avoids gap above next section/button) */
.visit-detail-section-body > *:last-child {
  margin-bottom: 0 !important;
}
.visit-detail-section-last .visit-detail-section-body,
.visit-detail-section:last-child .visit-detail-section-body,
.visit-form-body-cell.visit-detail-body > .visit-detail-section:last-child .visit-detail-section-body,
.visit-form-body-cell.visit-detail-body > section.visit-detail-section:last-of-type .visit-detail-section-body,
.visit-form-body-cell.visit-detail-body > section:last-of-type.visit-detail-section .visit-detail-section-body {
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}

.detail-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-md);
}

.detail-item {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.detail-item strong {
  font-weight: 600;
  color: var(--color-text-secondary);
  font-size: 0.875rem;
}

.detail-item span,
.detail-item p {
  color: var(--color-text-primary);
  font-size: 1rem;
  margin: 0;
}

.measurements-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: var(--spacing-lg);
}

.measurement-item {
  text-align: center;
  padding: var(--spacing-md);
  background: var(--color-background);
  border-radius: var(--radius-md);
}

.measurement-label {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  margin-bottom: var(--spacing-xs);
}

.measurement-value {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--color-text-primary);
}

.measurement-percentile {
  font-size: 0.875rem;
  color: var(--color-primary);
  margin-top: var(--spacing-xs);
}

.vaccines-list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-sm);
}

.vaccine-badge {
  display: inline-block;
  padding: var(--spacing-xs) var(--spacing-sm);
  background: #dbeafe;
  color: #1e40af;
  border-radius: var(--radius-sm);
  font-size: 0.875rem;
  font-weight: 500;
}

.prescription-detail {
  padding: var(--spacing-md);
  background: var(--color-background);
  border-radius: var(--radius-md);
  margin-bottom: var(--spacing-md);
}

.prescription-detail h4 {
  margin: 0 0 var(--spacing-sm) 0;
  color: var(--color-primary);
}

.prescription-detail p {
  margin: var(--spacing-xs) 0;
  font-size: 0.875rem;
}

.prescription-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-md);
  background: var(--color-background);
  border-radius: var(--radius-md);
  margin-bottom: var(--spacing-sm);
}

.prescription-details {
  flex: 1;
}

.prescription-notes {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  margin-top: var(--spacing-xs);
}

.prescription-actions {
  display: flex;
  gap: var(--spacing-sm);
}

.prescription-editor {
  padding: var(--spacing-md);
  background: var(--color-background);
  border-radius: var(--radius-md);
  margin-bottom: var(--spacing-md);
}

/* Prescription empty state and add button (match vaccine section) */
.prescription-empty {
  display: flex;
  align-items: center;
}

.prescription-add-wrap {
  display: flex;
  align-items: center;
  margin-top: var(--spacing-md);
}

.prescription-add-wrap .measurement-card-add,
.prescription-empty .measurement-card-add {
  width: auto;
}

.prescription-input-modern {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

/* Add Prescription button: same size as Add Vaccine (auto width, not full width) */
.prescription-input-modern > .measurement-card-add {
  width: auto;
  align-self: flex-start;
}

.prescription-modal-fields {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

/* Vaccine Input Component */
/* Modern Vaccine Input */
.vaccine-input-modern {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.vaccine-input-header {
  display: flex;
  align-items: center;
  margin-bottom: var(--spacing-sm);
}

.vaccine-input-title {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--color-text-secondary);
  margin: 0;
}

.vaccine-add-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  background: var(--color-background-card);
  color: var(--color-text-primary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 1.25rem;
  padding: 0;
}

.vaccine-add-button:hover:not(:disabled) {
  background: var(--color-primary);
  color: white;
  border-color: var(--color-primary);
  transform: scale(1.05);
}

.vaccine-add-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.vaccine-badges-list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
}

/* Illness section: padding under illness badges when one or more selected */
.illnesses-badges-wrap {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: 0;
}

.illnesses-badges-wrap .vaccine-badges-list {
  margin-bottom: 0;
  gap: var(--m-space-1);
}

/* Illness badges: same height/size as Add Illness button */
.illnesses-badges-wrap .vaccine-badge-item {
  padding: var(--m-space-1) var(--m-space-2);
  gap: var(--m-space-1);
  font-size: 0.8125rem;
  min-height: 32px;
  box-sizing: border-box;
}

.illnesses-badges-wrap .vaccine-badge-icon {
  font-size: 1rem;
}

.illnesses-badges-wrap .vaccine-badge-text {
  font-weight: 500;
}

/* Small space between Add Illness button and Symptoms field */
.visit-detail-section-body > .illnesses-input-modern + .form-field {
  margin-top: var(--spacing-sm);
}

/* Create illness entry: checkbox + hint (smaller, off grey, italic) */
.illness-create-entry-field {
  margin-top: var(--spacing-sm);
}

.form-field-hint-italic {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  font-style: italic;
  margin: 0.25rem 0 0 0;
  line-height: 1.4;
}

.vaccine-badge-item {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-sm);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 0.875rem;
  color: var(--color-text-primary);
}

.vaccine-badge-icon {
  font-size: 0.875rem;
}

.vaccine-badge-text {
  font-weight: 500;
}

.vaccine-badge-remove {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  border: none;
  background: transparent;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: all 0.2s;
  padding: 0;
  font-size: 0.875rem;
}

.vaccine-badge-remove:hover {
  background: var(--color-danger);
  color: white;
}

.vaccine-empty-state {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  font-style: italic;
  margin: 0;
}

.vaccine-empty {
  display: flex;
  align-items: center;
}

.vaccine-empty .vaccine-add-button {
  width: auto;
  padding: var(--spacing-xs) var(--spacing-md);
  gap: var(--spacing-xs);
  font-size: 0.875rem;
}

/* Vaccine Modal */
.vaccine-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: var(--spacing-lg);
}

.vaccine-modal-content {
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  width: 100%;
  max-width: 500px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.vaccine-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-lg);
  border-bottom: 1px solid var(--color-border);
}

.vaccine-modal-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin: 0;
}

.vaccine-modal-close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: var(--radius-md);
  transition: all 0.2s;
  font-size: 1.25rem;
  padding: 0;
}

.vaccine-modal-close:hover {
  background: var(--color-surface);
  color: var(--color-text-primary);
}

.vaccine-modal-body {
  padding: var(--spacing-lg);
  overflow-y: auto;
  flex: 1;
}

.vaccine-search {
  margin-bottom: var(--spacing-md);
}

.vaccine-search-input {
  width: 100%;
  padding: var(--spacing-sm) var(--spacing-md);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  background: var(--color-background);
  color: var(--color-text-primary);
  font-size: 0.875rem;
  transition: border-color 0.2s;
}

.vaccine-search-input:focus {
  outline: none;
  border-color: var(--color-primary);
}

.vaccine-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  max-height: 400px;
  overflow-y: auto;
}

.vaccine-list-empty {
  text-align: center;
  color: var(--color-text-secondary);
  font-size: 0.875rem;
  padding: var(--spacing-xl);
  margin: 0;
}

.vaccine-checkbox-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background-color 0.2s;
  user-select: none;
}

.vaccine-checkbox-item:hover {
  background: var(--color-surface);
}

.vaccine-checkbox {
  width: 18px;
  height: 18px;
  cursor: pointer;
  accent-color: var(--color-primary);
  flex-shrink: 0;
}

.vaccine-checkbox-label {
  font-size: 0.875rem;
  color: var(--color-text-primary);
  flex: 1;
}

.vaccine-modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing-sm);
  padding: var(--spacing-lg);
  border-top: 1px solid var(--color-border);
}

.vaccine-modal-button {
  padding: var(--spacing-sm) var(--spacing-lg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.vaccine-modal-button-cancel {
  background: var(--color-background);
  color: var(--color-text-primary);
}

.vaccine-modal-button-cancel:hover {
  background: var(--color-surface);
}

.vaccine-modal-button-save {
  background: var(--color-primary);
  color: white;
  border-color: var(--color-primary);
}

.vaccine-modal-button-save:hover {
  background: var(--color-primary-hover);
  border-color: var(--color-primary-hover);
}

/* Vaccine styles */
.vaccine-input {
  margin-bottom: var(--spacing-lg);
}

.vaccine-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-md);
  background: var(--color-background);
  border-radius: var(--radius-md);
  margin-bottom: var(--spacing-sm);
}

.vaccine-details {
  flex: 1;
}

.vaccine-actions {
  display: flex;
  gap: var(--spacing-sm);
}

.vaccine-editor {
  padding: var(--spacing-md);
  background: var(--color-background);
  border-radius: var(--radius-md);
  margin-bottom: var(--spacing-md);
}

.vaccine-suggestions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
  margin-top: var(--spacing-sm);
  padding: var(--spacing-sm);
  background: var(--color-background);
  border-radius: var(--radius-md);
}

.vaccine-suggestion {
  padding: var(--spacing-xs) var(--spacing-sm);
  background: white;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: 0.875rem;
  transition: all 0.2s;
}

.vaccine-suggestion:hover {
  background: var(--color-primary);
  color: white;
  border-color: var(--color-primary);
}

/* ============================================================================
   Visit Type Modal
   ============================================================================ */

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  /* reduce outer padding so modal can use more vertical space */
  padding: var(--spacing-md);
}

.modal-content {
  /* Increase modal width and height allowance so content fits without scrolling */
  max-width: 1000px;
  width: 100%;
  max-height: 98vh;
  overflow-y: auto;
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  padding: var(--spacing-lg);
}

.modal-content.card {
  padding: 20px;
}

.modal-content-large {
  max-width: 1000px;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-lg);
  padding-bottom: var(--spacing-md);
  border-bottom: 1px solid var(--color-border);
}

.modal-header h2 {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-text-primary);
}

.modal-close {
  background: none;
  border: none;
  font-size: 2rem;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-sm);
  transition: all 0.2s;
  line-height: 1;
}

.modal-close:hover:not(:disabled) {
  background: var(--color-surface);
  color: var(--color-text-primary);
}

.modal-close:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.modal-body {
  margin-bottom: var(--spacing-lg);
}

.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing-md);
  padding-top: var(--spacing-md);
  border-top: 1px solid var(--color-border);
}

/* Create user modal: uniform layout, spacing, and buttons */
.create-user-modal {
  max-width: 440px;
  width: 100%;
  padding: var(--spacing-lg);
}

.create-user-modal .modal-header {
  padding-top: 0;
  padding-left: 0;
  padding-right: 0;
  margin-left: 0;
  margin-right: 0;
  margin-bottom: var(--spacing-md);
}

.create-user-modal .modal-body {
  padding-left: 0;
  padding-right: 0;
  margin-left: 0;
  margin-right: 0;
  margin-bottom: 0;
}

.create-user-modal-form {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.create-user-modal-form .form-field {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  margin-bottom: 0;
}

.create-user-modal-form .form-label {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--color-text-primary);
}

.create-user-modal-form .form-input {
  width: 100%;
  box-sizing: border-box;
  padding: var(--spacing-sm) var(--spacing-md);
  font-size: 1rem;
  min-height: 40px;
}

.create-user-modal-form .password-input-wrapper .form-input {
  padding-right: 48px;
}

.create-user-modal-form .password-toggle {
  right: 10px;
}

.create-user-modal-form .form-hint {
  margin-top: var(--spacing-xs);
  margin-bottom: 0;
  font-size: 0.8125rem;
  color: var(--color-text-secondary);
  line-height: 1.4;
}

.create-user-modal-form .form-error {
  margin-top: var(--spacing-xs);
  margin-bottom: 0;
}

.create-user-modal-footer {
  display: flex;
  justify-content: stretch;
  gap: var(--spacing-md);
  margin-top: var(--spacing-lg);
  padding-top: var(--spacing-lg);
  border-top: 1px solid var(--color-border);
}

.create-user-modal-footer .btn {
  flex: 1;
  min-width: 0;
  min-height: 44px;
}

.create-user-modal .modal-subtitle {
  margin-bottom: var(--spacing-md);
  color: var(--color-text-secondary);
  font-size: 0.9375rem;
  line-height: 1.5;
}

.create-user-modal-form .error-message {
  margin-bottom: 0;
}

/* Delete family confirmation modal */
.delete-family-modal {
  max-width: 440px;
}

.delete-family-modal-alert {
  color: var(--color-danger);
  font-size: 1rem;
  margin: 0 0 12px;
  line-height: 1.5;
}

.delete-family-modal-instruction {
  color: var(--color-text-secondary);
  font-size: 0.9375rem;
  margin: 0 0 12px;
  line-height: 1.5;
}

.delete-family-modal-input {
  width: 100%;
  margin-top: 4px;
}

.modal-title {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: var(--spacing-sm);
  color: var(--color-text-primary);
}

.modal-subtitle {
  color: var(--color-text-secondary);
  margin-bottom: var(--spacing-lg);
}

/* ============================================================================
   Add Child Modal (popup) â€“ uniform spacing, dark theme, toggle gender
   ============================================================================ */

/* ~1.5x vertical spacing between rows */
.add-child-form-row-gap {
  margin-bottom: var(--spacing-md);
}

.add-child-modal-header {
  margin-bottom: var(--spacing-md);
  padding-bottom: var(--spacing-sm);
  border-bottom: 1px solid var(--color-border);
}

.add-child-form .form-field {
  margin-bottom: 0;
}

.add-child-form .form-label {
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--color-text-secondary);
}

/* Uniform padding for all inputs and buttons in add-child form */
.add-child-form .form-input,
.add-child-form .form-textarea,
.add-child-form .add-child-gender-option,
.add-child-form .add-child-actions button {
  padding: 0.625rem 0.875rem;
  min-height: 2.5rem;
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  background: var(--color-background);
  color: var(--color-text-primary);
  font-size: 0.875rem;
}

.add-child-form .form-textarea {
  min-height: 4rem;
  resize: vertical;
}

/* Top row: avatar slightly left, more space before name, name tall and aligned */
.add-child-top-row {
  display: flex;
  align-items: center;
  gap: calc(var(--spacing-md) * 2);
}

.add-child-top-row .form-field {
  flex: 1;
  margin-bottom: 40px;
}

.add-child-top-row .form-input {
  min-height: 2.75rem;
}

.add-child-avatar-wrap {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  flex-shrink: 0;
  margin-bottom: 0;
  margin-right: 0;
  padding: 20px
}

.add-child-avatar-button {
  position: relative;
  display: block;
}

.add-child-avatar-img {
  width: 96px;
  height: 96px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: var(--elevation-2);
  display: block;
  border: 2px solid var(--color-border);
}

.add-child-avatar-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.35);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.2s;
}

.add-child-avatar-button:hover .add-child-avatar-overlay {
  opacity: 1;
}

.add-child-avatar-hint {
  margin: var(--spacing-xs) 0 0;
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

/* DOB and Gender side by side, equal spacing */
.add-child-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-md);
  align-items: start;
}

.add-child-row-half {
  grid-template-columns: 1fr 1fr;
}

/* Align DOB input with gender toggle */
.add-child-row-half > .form-field:first-child {
  margin-top: 10px;
}

.add-child-gender-field {
  margin-bottom: 0;
}

/* Gender as toggle with clear selection highlight */
.add-child-gender-toggle {
  display: inline-flex;
  gap: 0;
  padding: 2px;
}

.add-child-gender-option {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: 0.5rem 1rem;
  border: none;
  border-radius: calc(var(--radius-md) - 1px);
  background: transparent;
  color: var(--color-text-secondary);
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
}

.add-child-gender-option:hover:not(:disabled) {
  background: var(--color-surface);
  color: var(--color-text-primary);
}

.add-child-gender-option.selected {
  background: var(--color-primary);
  color: white;
}

.add-child-gender-option-icon {
  font-size: 1.125rem;
  flex-shrink: 0;
}

/* Keep labels same height so controls align */
.add-child-form .add-child-row-half .form-label,
.add-child-form .add-child-birth-row .form-label {
  min-height: 1.5em;
  display: block;
}

/* Birth details section title */
.add-child-section-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin: 0 0 calc(var(--spacing-xs) * 1.5) 0;
  padding-bottom: var(--spacing-xs);
  border-bottom: 2px solid var(--color-primary);
  display: inline-block;
  width: fit-content;
}

.add-child-birth-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: var(--spacing-lg);
  align-items: start;
  margin-bottom: var(--spacing-md);
}

.add-child-number-wrap {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.add-child-lb-oz {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  flex-wrap: wrap;
}

/* Same width and height for weight/height inputs */
.add-child-lb-oz .form-input,
.add-child-height-in .form-input {
  width: 4.5rem;
  min-width: 4.5rem;
  min-height: 2.5rem;
  text-align: center;
}

.add-child-unit {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  flex-shrink: 0;
}

.add-child-height-in {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

/* Notes: full width, matching row spacing */
.add-child-notes-wrap {
  margin-bottom: var(--spacing-md);
}

.add-child-notes-wrap .form-field {
  margin-bottom: 0;
}

.add-child-notes-wrap .form-textarea {
  width: 100%;
  box-sizing: border-box;
}

/* Hide number input spinners */
.input-no-spinner {
  -moz-appearance: textfield;
}
.input-no-spinner::-webkit-inner-spin-button,
.input-no-spinner::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Cancel and Add Child right-aligned with equal spacing */
.add-child-actions {
  padding-top: calc(var(--spacing-md) * 1.5);
  border-top: 1px solid var(--color-border);
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing-md);
}

.add-child-actions button {
  min-height: 2.5rem;
}

.add-child-avatar-modal-overlay {
  padding: var(--spacing-md);
}

.visit-type-selection {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-lg);
}

/* Compact sidebar variant for visit-type buttons used in sidebars */
.visit-type-button.sidebar {
  padding: 8px;
  min-height: auto;
  border-width: 1px;
  display: flex;
  align-items: center;
  justify-content: center;
  width: auto;
  height: auto;
  border-radius: 12px;
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
}
.visit-type-button.sidebar .visit-type-icon {
  margin-bottom: 0;
}
.visit-type-button.sidebar .visit-type-icon .visit-icon-outline {
  width: 36px;
  height: 36px;
  background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius: 8px;
}
.visit-type-button.sidebar.wellness .visit-icon-outline { color: var(--color-success); }
.visit-type-button.sidebar.sick .visit-icon-outline { color: var(--color-danger); }
.visit-type-button.sidebar.active { box-shadow: 0 8px 20px rgba(0,0,0,0.08); transform: translateY(-2px); }

/* Sidebar variant: show small label under compact icon */
.visit-type-button.sidebar .visit-type-label {
  font-size: 0.75rem;
  margin-top: 6px;
  color: var(--color-text-secondary);
  text-align: center;
}

/* Larger small-variant: square with label stacked for sidebar */
.visit-type-button.visit-type-small {
  width: 92px;
  height: auto;
  padding: 10px 8px;
  border-radius: 10px;
  flex-direction: column;
}
.visit-type-button.visit-type-small .visit-type-icon {
  margin-bottom: 6px;
}
.visit-type-button.visit-type-small .visit-icon-outline {
  width: 64px;
  height: 64px;
  border-radius: 12px;
  display:flex; align-items:center; justify-content:center;
}
.visit-type-button.visit-type-small .visit-type-svg { width: 28px; height: 28px; color: white; }

/* Graph icon background for growth button (use primary blue gradient) */
.visit-icon-outline.sidebar-graph {
  background: linear-gradient(135deg, #60a5fa, #3b82f6);
}

.visit-type-button.visit-type-small.wellness .visit-icon-outline.sidebar-graph .visit-type-svg { color: white; }



@media (max-width: 1024px) {
  .visit-type-selection {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 768px) {
  .visit-type-selection {
    grid-template-columns: 1fr;
  }
}

.visit-type-button {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-xl);
  border: 3px solid var(--color-border);
  border-radius: var(--radius-lg);
  background: var(--color-background-card);
  cursor: pointer;
  transition: all 0.2s;
  text-align: center;
  /* slightly reduce min-height to fit more comfortably in the modal */
  min-height: 160px;
}

.visit-type-button:hover {
  border-color: var(--color-primary);
  /* no translate to avoid layout shift; glow will indicate hover */
}

.visit-type-button.wellness:hover {
  background: var(--color-surface);
  border-color: var(--color-success);
}

.visit-type-button.sick:hover {
  background: var(--color-surface);
  border-color: var(--color-danger);
}

.visit-type-button.injury:hover {
  background: var(--color-surface);
  border-color: var(--color-visit-accent);
}

.visit-type-button.vision:hover {
  background: var(--color-surface);
  border-color: var(--color-vision);
}

/* Dark mode specific hover adjustments */
[data-theme="dark"] .visit-type-button.wellness:hover {
  background: rgba(16, 185, 129, 0.1);
}

[data-theme="dark"] .visit-type-button.sick:hover {
  background: rgba(239, 68, 68, 0.1);
}

[data-theme="dark"] .visit-type-button.injury:hover {
  background: rgba(11, 61, 145, 0.12);
}

[data-theme="dark"] .visit-type-button.vision:hover {
  background: var(--color-vision-light);
}

.visit-type-icon {
  font-size: 3rem;
  margin-bottom: var(--spacing-md);
}

.visit-type-label {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: var(--spacing-sm);
  color: var(--color-text-primary);
}

.visit-type-description {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
}

.modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing-md);
  margin-top: var(--spacing-lg);
}

/* ============================================================================
   Responsive Styles - Children Grid
   ============================================================================ */

/* Tablet: 2 columns */
/* Large screens: 3 columns */
@media (max-width: 1200px) {
  .children-grid-cards {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* Tablet: 2 columns */
@media (max-width: 1024px) {
  .children-grid-cards {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Mobile: 1 column */
@media (max-width: 768px) {
  .children-grid-cards {
    grid-template-columns: 1fr;
  }

  .child-card-compact .card-content {
    flex-direction: column-reverse;
    text-align: center;
  }

  .child-card-header {
    justify-content: center;
  }

  .child-card-details {
    align-items: center;
  }

  .child-avatar-large {
    width: 80px;
    height: 80px;
  }

  .child-name {
    font-size: 1.125rem;
  }

  .visit-type-selection {
    grid-template-columns: 1fr;
  }

  .modal-content {
    max-width: 100%;
    margin: var(--spacing-md);
  }

  .overview-main {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .overview-avatar-img {
    width: 120px;
    height: 120px;
  }

  .overview-detail-item {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-xs);
  }

  .overview-detail-label {
    min-width: auto;
  }

  .overview-last-visits {
    flex-direction: column;
    width: 100%;
  }

  .overview-last-visit {
    width: 100%;
  }

  .overview-header {
    flex-direction: column;
    align-items: stretch;
  }

  .overview-actions {
    width: 100%;
    justify-content: stretch;
  }

  .overview-actions .btn {
    flex: 1;
  }
}

/* ============================================================================
   Tabs Component
   ============================================================================ */

.tabs-container {
  width: 100%;
}

.tabs-header {
  display: flex;
  gap: var(--spacing-xs);
  border-bottom: 2px solid var(--color-border);
  margin-bottom: var(--spacing-lg);
}


.tab-button {
  padding: var(--spacing-sm) var(--spacing-lg);
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--color-text-secondary);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all 0.2s;
  margin-bottom: -2px;
  position: relative;
}

.tab-button:hover {
  color: var(--color-text-primary);
  background: var(--color-surface);
}

.tab-button.active {
  color: var(--color-primary);
  border-bottom-color: var(--color-primary);
  font-weight: var(--font-weight-semibold);
}

.tabs-content {
}

/* ============================================================================
   Documents List Component
   ============================================================================ */

.documents-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.document-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  transition: all 0.2s;
}

.document-item:hover {
  background: var(--color-surface);
  border-color: var(--color-primary);
}
.document-icon {
  font-size: 1.25rem;
  flex-shrink: 0;
}

.document-info {
  flex: 1;
  min-width: 0;
}

/* File icon sizing for documents list (Lucide svgs) */
.document-file-icon {
  width: 20px;
  height: 20px;
  display: inline-block;
  color: var(--color-text-secondary);
  opacity: 0.95;
}

/* Ensure document badges follow the same compact single-line layout as visits/illnesses */
.document-item.timeline-item-modern .timeline-item-label-row .document-filename-link {
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}
.file-size-badge {
  opacity: 0.9;
}

.document-filename-link {
  display: block;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  text-decoration: none;
  cursor: pointer;
  background: none;
  border: none;
  padding: 0;
  text-align: left;
  transition: color 0.2s;
}

.document-filename-link:hover {
  color: var(--color-primary-hover);
  text-decoration: underline;
}

/* Ensure document filename appears as a blue inline hyperlink inside timeline rows */
.timeline-item-label-row .document-filename-link {
  display: inline;
  color: var(--color-text-secondary) !important;
  text-decoration: none;
}
.timeline-item-label-row .document-filename-link:hover {
  /* keep hover underline but keep text color as grey */
  color: var(--color-text-secondary) !important;
  text-decoration: underline;
}

.document-meta {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: 0.75rem;
  color: var(--color-text-secondary);
  margin-top: var(--spacing-xs);
  flex-wrap: wrap;
}

.document-meta-item {
  display: inline-block;
}

.document-meta-separator {
  color: var(--color-text-secondary);
  opacity: 0.5;
}

.document-visit-link {
  color: var(--color-primary);
  text-decoration: none;
  transition: color 0.2s;
}

.document-visit-link:hover {
  color: var(--color-primary-hover);
  text-decoration: underline;
}

.document-meta .wellness-title-badge {
  font-size: 0.75rem;
  padding: 0.125rem 0.375rem;
  margin: 0;
}

.document-edit-form {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  width: 100%;
}

.document-edit-input {
  flex: 1;
  padding: var(--spacing-xs) var(--spacing-sm);
  border: 1px solid var(--color-primary);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-base);
  background: var(--color-background);
  color: var(--color-text-primary);
}

.document-edit-actions {
  display: flex;
  gap: var(--spacing-xs);
}

.document-actions {
  display: flex;
  gap: var(--spacing-xs);
  flex-shrink: 0;
}

.btn-icon-action {
  background: none;
  border: none;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: var(--spacing-xs);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  width: 32px;
  height: 32px;
}

.btn-icon-action:hover {
  background: var(--color-surface);
  color: var(--color-text-primary);
}

.btn-download:hover {
  color: var(--color-primary);
}

.btn-edit:hover {
  color: var(--color-primary);
}

.btn-delete:hover {
  color: var(--color-danger);
}

.btn-icon-small {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  padding: var(--spacing-xs);
  cursor: pointer;
  font-size: var(--font-size-sm);
  transition: all 0.2s;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn-icon-small:hover {
  background: var(--color-primary);
  color: white;
  border-color: var(--color-primary);
}

.btn-save:hover {
  background: var(--color-primary);
  color: white;
}

.btn-cancel:hover {
  background: var(--color-danger);
  color: white;
}

.documents-empty {
  text-align: center;
  padding: var(--spacing-xl);
  color: var(--color-text-secondary);
}

/* ============================================================================
   Growth Charts
   ============================================================================ */

.growth-chart-body {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xl);
}

.growth-chart-section {
  padding-bottom: var(--spacing-xl);
  border-bottom: 1px solid var(--color-border);
}

.growth-chart-section:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.growth-chart-section-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin-bottom: var(--spacing-md);
  padding-bottom: var(--spacing-xs);
  border-bottom: 2px solid var(--color-primary);
  display: inline-block;
}

.growth-charts-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-xl);
}

.growth-chart-item {
  padding-bottom: var(--spacing-xl);
  border-bottom: 1px solid var(--color-border);
}

.growth-chart-item:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.growth-chart-item-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin-bottom: var(--spacing-sm);
}

@media (min-width: 768px) {
  .growth-charts-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1600px) {
  .growth-charts-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

.growth-metric-toggles {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-md);
  align-items: center;
}

.growth-metric-toggle {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  cursor: pointer;
  user-select: none;
}

.growth-metric-toggle input[type="checkbox"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
  accent-color: var(--color-primary);
}

.growth-metric-label {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: 0.875rem;
  color: var(--color-text-primary);
}

.growth-metric-color {
  width: 12px;
  height: 12px;
  border-radius: 2px;
  display: inline-block;
  flex-shrink: 0;
}

.growth-chart-description {
  margin-bottom: var(--spacing-md);
  color: var(--color-text-secondary);
  font-size: 0.875rem;
}

.growth-chart-container {
  width: 100%;
  /* min-height: 500px; */
}

.chart-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-xxl);
  text-align: center;
  color: var(--color-text-secondary);
  min-height: 400px;
}

.chart-empty-subtitle {
  margin-top: var(--spacing-sm);
  font-size: 0.875rem;
  color: var(--color-text-tertiary);
}

/* Recharts dark mode support */
.recharts-wrapper {
  color: var(--color-text-primary);
}

.recharts-cartesian-axis-tick {
  fill: var(--color-text-secondary);
}

.recharts-legend-wrapper {
  color: var(--color-text-primary);
}

.recharts-tooltip-wrapper {
  color: var(--color-text-primary);
}

.recharts-reference-line-label {
  fill: var(--color-text-primary);
}

.recharts-reference-area {
  fill-opacity: 0.2;
}

/* ============================================================================
   Tags / Badges
   ============================================================================ */

.tag-input-container {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.tag-input-tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
  align-items: center;
  padding: var(--spacing-sm);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  background-color: #0f0f0f;
  min-height: 44px;
}

.tag-input-field {
  flex: 1;
  min-width: 120px;
  border: none;
  outline: none;
  background: transparent;
  color: var(--color-text-primary);
  font-size: 0.875rem;
  padding: var(--spacing-xs);
}

.tag-input-field::placeholder {
  color: var(--color-text-secondary);
  opacity: 0.7;
}

.tag-input-hint {
  font-size: 0.75rem;
  color: var(--color-text-secondary);
  margin: 0;
}

.tag-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-sm);
  background-color: #3b82f6;
  color: white;
  border-radius: var(--radius-full);
  font-size: 0.875rem;
  font-weight: 500;
  border: 2px solid #3b82f6;
  white-space: nowrap;
}

.tag-remove {
  background: none;
  border: none;
  color: white;
  cursor: pointer;
  font-size: 1.2rem;
  line-height: 1;
  padding: 0;
  margin-left: var(--spacing-xs);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  transition: background-color 0.2s;
}

.tag-remove:hover {
  background-color: rgba(255, 255, 255, 0.2);
}

.visit-tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
  margin-top: var(--spacing-md);
  padding-top: var(--spacing-md);
  border-top: 1px solid var(--color-border);
}

.modern-checkbox-label {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  cursor: pointer;
  user-select: none;
}

.modern-checkbox-input {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
}

.modern-checkbox-custom {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border: 2px solid var(--color-border);
  border-radius: var(--radius-sm);
  background: var(--color-background);
  transition: all 0.2s;
  flex-shrink: 0;
}

.modern-checkbox-label:hover .modern-checkbox-custom {
  border-color: var(--color-primary);
}

.modern-checkbox-input:checked + .modern-checkbox-custom {
  background: var(--color-primary);
  border-color: var(--color-primary);
}

.modern-checkbox-input:disabled + .modern-checkbox-custom {
  opacity: 0.5;
  cursor: not-allowed;
}

.modern-checkbox-checkmark {
  width: 14px;
  height: 14px;
  color: white;
  opacity: 0;
  transition: opacity 0.2s;
}

.modern-checkbox-input:checked + .modern-checkbox-custom .modern-checkbox-checkmark {
  opacity: 1;
}

.modern-checkbox-text {
  font-size: 0.875rem;
  color: var(--color-text-primary);
}

/* Vaccine History */
.vaccine-history-container {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.vaccine-history-summary {
  display: flex;
  gap: var(--spacing-lg);
  padding: var(--spacing-md);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
}

.vaccine-summary-stat {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.vaccine-summary-label {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  font-weight: 500;
}

.vaccine-summary-value {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--color-primary);
}

.vaccine-history-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.vaccine-history-item {
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--spacing-md);
  transition: all 0.2s;
}

.vaccine-history-item:hover {
  border-color: var(--color-primary);
  box-shadow: var(--shadow-sm);
}

.vaccine-history-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-md);
  padding-bottom: var(--spacing-sm);
  border-bottom: 1px solid var(--color-border);
}

.vaccine-history-name {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.vaccine-icon {
  font-size: 1.25rem;
}

.vaccine-name-text {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--color-text-primary);
}

.vaccine-history-count {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  font-weight: 500;
  padding: var(--spacing-xs) var(--spacing-sm);
  background: var(--color-surface);
  border-radius: var(--radius-sm);
}

.vaccine-history-dates {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.vaccine-dose-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  text-decoration: none;
  color: inherit;
  transition: all 0.2s;
}

.vaccine-dose-item:hover {
  /* Neutral hover: no blue tint or border color change */
  background: var(--color-surface);
}

.vaccine-dose-number {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--color-text-secondary);
  min-width: 2rem;
}

.vaccine-dose-date {
  flex: 1;
  font-size: 0.9rem;
  color: var(--color-text-primary);
  font-weight: 500;
}

.vaccine-dose-arrow {
  font-size: 1rem;
  color: var(--color-text-tertiary);
  transition: color 0.2s;
}

.vaccine-dose-item:hover .vaccine-dose-arrow {
  color: var(--color-primary);
}

.vaccine-reports-section {
  margin-top: var(--spacing-lg);
}

.vaccine-reports-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin: 0 0 var(--spacing-md) 0;
}

.vaccine-reports-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-lg);
}

.vaccine-report-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  transition: all 0.2s;
}

.vaccine-report-item:hover {
  border-color: var(--color-primary);
  box-shadow: var(--shadow-sm);
}

.vaccine-report-icon {
  font-size: 1.25rem;
  flex-shrink: 0;
}

.vaccine-report-info {
  flex: 1;
  min-width: 0;
}

.vaccine-report-filename-link {
  display: block;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-primary);
  text-decoration: none;
  cursor: pointer;
  background: none;
  border: none;
  text-align: left;
  padding: 0;
  margin-bottom: var(--spacing-xs);
}

.vaccine-report-filename-link:hover {
  color: var(--color-primary-hover);
  text-decoration: underline;
}

.vaccine-report-meta {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: 0.75rem;
  color: var(--color-text-secondary);
}

.vaccine-report-meta-separator {
  color: var(--color-text-tertiary);
}

.vaccine-report-meta-item {
  color: var(--color-text-secondary);
}

.vaccine-report-edit-form {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  width: 100%;
}

.vaccine-report-edit-input {
  flex: 1;
  padding: var(--spacing-xs) var(--spacing-sm);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  background: var(--color-background);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
}

.vaccine-report-edit-actions {
  display: flex;
  gap: var(--spacing-xs);
}

.vaccine-report-actions {
  display: flex;
  gap: var(--spacing-xs);
  align-items: center;
}

.vaccine-reports-loading {
  margin-bottom: var(--spacing-lg);
}

/* Vaccine History Upload Section */
.vaccine-history-upload-section {
  padding: var(--spacing-lg);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
}

.vaccine-history-upload-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin: 0 0 var(--spacing-sm) 0;
}

.vaccine-history-upload-description {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  margin: 0 0 var(--spacing-md) 0;
}

/* Button Spinner Wrapper */
.btn-spinner-wrapper {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 1.25rem;
  height: 1.25rem;
}

.btn-spinner-wrapper .spinner {
  width: 1rem;
  height: 1rem;
  border-width: 2px;
  margin: 0;
}

.btn-spinner-wrapper .loading-spinner {
  margin: 0;
  padding: 0;
}

.btn-spinner-wrapper .loading-spinner .spinner {
  width: 1rem;
  height: 1rem;
  border-width: 2px;
}

.btn-spinner-wrapper .loading-spinner p {
  display: none;
}

/* ============================================================================
 * All Illnesses/Visits Views
 * ============================================================================ */

.all-illnesses-view,
.all-visits-view {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.all-illnesses-header,
.all-visits-header {
  display: flex;
  justify-content: flex-end;
  padding: 0;
}

.timeline-container {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  padding: var(--spacing-sm) 0;
}

.timeline-item-with-child {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  position: relative;
  padding-bottom: var(--spacing-sm);
  border-bottom: 1px solid var(--color-border);
}

.timeline-item-with-child:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.timeline-child-badge {
  display: inline-flex;
  align-items: center;
  padding: var(--spacing-xs) var(--spacing-sm);
  background: var(--color-primary-light);
  border: 1px solid var(--color-primary);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
  width: fit-content;
  margin-bottom: var(--spacing-xs);
  transition: all 0.2s ease;
}

.timeline-child-badge:hover {
  background: var(--color-primary);
  color: #ffffff;
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

.timeline-child-badge .child-link {
  color: inherit;
  text-decoration: none;
  transition: none;
}

.timeline-child-badge .child-link:hover {
  text-decoration: none;
}

/* Dark mode adjustments for child badge */
[data-theme="dark"] .timeline-child-badge {
  background: rgba(96, 165, 250, 0.15);
  border-color: var(--color-primary);
  color: var(--color-primary);
}

[data-theme="dark"] .timeline-child-badge:hover {
  background: var(--color-primary);
  color: #ffffff;
}

.empty-state-hint {
  padding: var(--spacing-sm);
  text-align: center;
}

.empty-state-hint p {
  margin: 0;
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-style: italic;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .filters-toolbar {
    flex-direction: column;
    align-items: stretch;
  }
  
  .filters-actions {
    width: 100%;
  }
  
  .filters-actions button {
    width: 100%;
  }
  
  .all-illnesses-header,
  .all-visits-header {
    justify-content: stretch;
  }
  
  .all-illnesses-header button,
  .all-visits-header button {
    width: 100%;
  }
  
  .timeline-item-with-child {
    gap: var(--spacing-sm);
  }
}

/* ============================================================================
 * Document History Component
 * ============================================================================ */

.document-history-container {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.document-history-summary {
  display: flex;
  gap: var(--spacing-lg);
  padding: var(--spacing-md);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  flex-wrap: wrap;
}

.document-history-stat {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.document-history-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
}

.document-history-value {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
}

.document-history-timeline {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xl);
}

.document-history-day-group {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.document-history-date-header {
  display: flex;
  align-items: baseline;
  gap: var(--spacing-md);
  padding-bottom: var(--spacing-sm);
  border-bottom: 2px solid var(--color-border);
}

.document-history-date {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin: 0;
}

.document-history-count {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-normal);
}

.document-history-entries {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  padding-left: var(--spacing-md);
}

.document-history-entry {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  transition: all 0.2s ease;
}

.document-history-entry:hover {
  background: var(--color-surface);
  border-color: var(--color-primary);
  box-shadow: var(--shadow-sm);
}

.document-history-entry-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-surface);
  border-radius: var(--radius-sm);
}

.document-history-entry-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  min-width: 0;
}

.document-history-entry-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  flex-wrap: wrap;
}

.document-history-filename-link {
  background: none;
  border: none;
  color: var(--color-primary);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  text-decoration: none;
  cursor: pointer;
  padding: 0;
  text-align: left;
  transition: opacity 0.2s;
}

.document-history-filename-link:hover {
  opacity: 0.8;
  text-decoration: underline;
}

.document-history-entry-type {
  font-size: var(--font-size-xs);
  padding: 2px var(--spacing-xs);
  background: var(--color-primary-light);
  border: 1px solid var(--color-primary);
  border-radius: var(--radius-sm);
  color: var(--color-primary);
  font-weight: var(--font-weight-medium);
  white-space: nowrap;
}

.document-history-entry-meta {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  flex-wrap: wrap;
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.document-history-meta-item {
  color: var(--color-text-secondary);
}

.document-history-meta-separator {
  color: var(--color-text-secondary);
  opacity: 0.5;
}

.document-history-visit-link {
  color: var(--color-primary);
  text-decoration: none;
  transition: opacity 0.2s;
}

.document-history-visit-link:hover {
  opacity: 0.8;
  text-decoration: underline;
}

.document-history-rename-notice {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  font-style: italic;
  margin-top: var(--spacing-xs);
  padding-top: var(--spacing-xs);
  border-top: 1px solid var(--color-border);
}

.document-history-rename-label {
  color: var(--color-text-secondary);
}

.document-history-rename-filename {
  color: var(--color-text-primary);
  font-weight: var(--font-weight-medium);
}

/* Dark mode adjustments */
[data-theme="dark"] .document-history-entry-type {
  background: rgba(96, 165, 250, 0.15);
  border-color: var(--color-primary);
  color: var(--color-primary);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .document-history-summary {
    flex-direction: column;
    gap: var(--spacing-md);
  }
  
  .document-history-entry {
    flex-direction: column;
    gap: var(--spacing-sm);
  }
  
  .document-history-entry-icon {
    align-self: flex-start;
  }
  
  .document-history-entries {
    padding-left: 0;
  }
}

/* ============================================================================
   Visit History
   ============================================================================ */

.visit-history-empty {
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  padding: var(--spacing-md);
  text-align: center;
}

.visit-history-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.visit-history-entry {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: var(--color-surface);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
}

.visit-history-icon {
  font-size: 1.25rem;
  line-height: 1;
  flex-shrink: 0;
}

.visit-history-content {
  flex: 1;
  min-width: 0;
}

.visit-history-description {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  margin-bottom: var(--spacing-xs);
}

.visit-history-date {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
}

/* ============================================================================
   Login Page
   ============================================================================ */

/* Login page: uniform spacing (8px grid), centered card */
.login-page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
  background: var(--color-background);
}

.login-container {
  width: 100%;
  max-width: 400px;
}

.login-card {
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: 32px;
  box-shadow: var(--shadow-lg);
  width: 100%;
}

.login-card .login-header {
  text-align: center;
  margin-bottom: 24px;
}

.login-card .login-header + * {
  margin-top: 0;
}

.login-logo {
  width: 56px;
  height: 56px;
  margin: 0 auto 16px;
  display: block;
  object-fit: contain;
}

.login-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-text-primary);
  margin: 0 0 4px;
  letter-spacing: -0.02em;
}

.login-subtitle {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  margin: 0;
}

.login-form {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.login-form .form-field {
  margin-bottom: 0;
}

.login-form .form-label {
  font-size: 0.875rem;
  font-weight: 500;
}

.login-form .form-input {
  width: 100%;
  box-sizing: border-box;
}

.login-actions {
  display: flex;
  justify-content: flex-end;
  margin: -4px 0 0;
}

.forgot-password-link {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 0.875rem;
  transition: color 0.2s;
}

.forgot-password-link:hover {
  color: var(--color-primary-hover, var(--color-primary));
  text-decoration: underline;
}

.login-button {
  margin-top: 8px;
}

.login-footer {
  margin-top: 24px;
  padding-top: 24px;
  border-top: 1px solid var(--color-border);
  text-align: center;
}

.login-footer p {
  color: var(--color-text-secondary);
  font-size: 0.875rem;
  margin: 0;
}

.register-link {
  color: var(--color-primary);
  text-decoration: none;
  font-weight: 500;
  background: none;
  border: none;
  padding: 0;
  font-size: inherit;
  cursor: pointer;
  transition: color 0.2s;
}

.register-link:hover {
  color: var(--color-primary-hover, var(--color-primary));
  text-decoration: underline;
}

.button-as-link {
  color: inherit;
}

.register-link.button-as-link {
  color: var(--color-primary);
}

.register-link.button-as-link:hover {
  color: var(--color-primary-hover, var(--color-primary));
}

/* Password field: same structure as other form fields */
.password-input-wrapper {
  position: relative;
  display: block;
}

.password-input-wrapper .form-input {
  padding-right: 44px;
  width: 100%;
  box-sizing: border-box;
}

.password-toggle {
  position: absolute;
  top: 50%;
  right: 8px;
  transform: translateY(-50%);
  width: 36px;
  height: 36px;
  background: none;
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-secondary);
  transition: color 0.2s, background 0.2s;
  z-index: 1;
}

.password-toggle:hover {
  color: var(--color-text-primary);
  background: var(--color-surface);
}

.password-toggle:focus {
  outline: 2px solid var(--color-focus-ring);
  outline-offset: 2px;
}

.password-toggle-icon {
  flex-shrink: 0;
}

/* Login: inline alert (industry-standard, no emoji, no retry) */
.login-alert {
  margin-bottom: 16px;
  padding: 12px 16px;
  font-size: 0.875rem;
  line-height: 1.4;
  color: var(--color-danger);
  background: var(--color-danger-light);
  border: 1px solid rgba(239, 68, 68, 0.25);
  border-radius: var(--radius-md);
  border-left-width: 4px;
  border-left-color: var(--color-danger);
}

/* Dark mode */
[data-theme="dark"] .login-page {
  background: var(--color-background);
}

[data-theme="dark"] .login-card {
  background: var(--color-background-card);
  border-color: var(--color-border);
}

/* Responsive */
@media (max-width: 480px) {
  .login-page {
    padding: 16px;
  }

  .login-card {
    padding: 24px;
  }

  .login-title {
    font-size: 1.375rem;
  }
}

/* ============================================================================
   Audit Diff View - Field-level change history display
   ============================================================================ */

.audit-diff {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: var(--color-background-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
}

.audit-diff-empty {
  padding: var(--spacing-lg);
  text-align: center;
  color: var(--color-text-secondary);
}

.audit-diff-empty-text {
  font-style: italic;
}

.audit-diff-field {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  padding: var(--spacing-sm);
  border-radius: var(--radius-sm);
  background: var(--color-background);
  transition: background-color 0.2s;
}

.audit-diff-field:hover {
  background: var(--color-gray-50);
}

[data-theme="dark"] .audit-diff-field:hover {
  background: var(--color-surface);
}

.audit-diff-field-label {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-secondary);
  text-transform: capitalize;
}

.audit-diff-field-values {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  flex-wrap: wrap;
  font-size: var(--font-size-base);
}

.audit-diff-before,
.audit-diff-after {
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  word-break: break-word;
}

.audit-diff-before {
  color: var(--color-text-primary);
  background: var(--color-gray-100);
}

[data-theme="dark"] .audit-diff-before {
  background: var(--color-gray-800);
}

.audit-diff-before--removed {
  background: var(--color-danger-light);
  color: var(--color-danger);
  text-decoration: line-through;
  opacity: 0.8;
}

[data-theme="dark"] .audit-diff-before--removed {
  background: rgba(239, 68, 68, 0.2);
  color: #fca5a5;
}

.audit-diff-before--changed {
  background: var(--color-warning-light);
  color: var(--color-warning);
}

[data-theme="dark"] .audit-diff-before--changed {
  background: rgba(245, 158, 11, 0.2);
  color: #fbbf24;
}

.audit-diff-arrow {
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-semibold);
  flex-shrink: 0;
}

.audit-diff-after {
  color: var(--color-text-primary);
  background: var(--color-gray-100);
}

[data-theme="dark"] .audit-diff-after {
  background: var(--color-gray-800);
}

.audit-diff-after--added {
  background: var(--color-success-light);
  color: var(--color-success);
  font-weight: var(--font-weight-semibold);
}

[data-theme="dark"] .audit-diff-after--added {
  background: rgba(16, 185, 129, 0.2);
  color: #34d399;
}

.audit-diff-after--changed {
  background: var(--color-warning-light);
  color: var(--color-warning);
}

[data-theme="dark"] .audit-diff-after--changed {
  background: rgba(245, 158, 11, 0.2);
  color: #fbbf24;
}

/* Field type variants */
.audit-diff-field--added {
  border-left: 3px solid var(--color-success);
}

.audit-diff-field--removed {
  border-left: 3px solid var(--color-danger);
}

.audit-diff-field--changed {
  border-left: 3px solid var(--color-warning);
}

/* Responsive adjustments */
@media (max-width: 640px) {
  .audit-diff-field-values {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-xs);
  }
  
  .audit-diff-arrow {
    transform: rotate(90deg);
  }
}

/* Form hint styling */
.form-hint {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  margin-top: var(--spacing-xs);
  line-height: var(--line-height-normal);
}

/* ============================================================================
   Welcome / Onboarding Page
   ============================================================================ */

.welcome-page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-lg);
  position: relative;
  overflow: hidden;
}

.welcome-streamers {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9998;
  overflow: hidden;
}

.welcome-streamer {
  position: absolute;
  top: -100px;
  width: 4px;
  height: 100px;
  transform-origin: top center;
  animation: welcome-streamer-fall linear infinite;
}

@keyframes welcome-streamer-fall {
  0% {
    transform: translateY(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(calc(100vh + 100px)) rotate(360deg);
    opacity: 0;
  }
}

.welcome-page-inner {
  position: relative;
  z-index: 9999;
  width: 100%;
  max-width: 560px;
}

.welcome-card {
  padding: var(--spacing-xl);
  animation: welcome-card-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes welcome-card-in {
  0% {
    opacity: 0;
    transform: scale(0.95) translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.welcome-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.welcome-progress {
  margin-top: var(--spacing-xl);
  margin-bottom: 0;
  width: 100%;
  padding-top: var(--spacing-lg);
  border-top: 1px solid var(--color-border);
}

.welcome-progress-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-xs);
  flex-wrap: wrap;
}

.welcome-progress-text {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  margin: 0;
}

.welcome-skip-in-progress {
  flex-shrink: 0;
}

.welcome-progress-dots {
  display: flex;
  gap: var(--spacing-xs);
  justify-content: center;
}

.welcome-progress-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--color-border);
  transition: background 0.2s;
}

.welcome-progress-dot.active {
  background: var(--color-primary);
}

.welcome-step {
  width: 100%;
  text-align: center;
}

.welcome-logo-section {
  margin-bottom: var(--spacing-lg);
}

.welcome-logo {
  height: 72px;
  width: auto;
  object-fit: contain;
}

.welcome-title {
  font-size: 1.75rem;
  font-weight: 700;
  color: var(--color-text-primary);
  margin: 0 0 var(--spacing-md);
  line-height: 1.2;
}

.welcome-subtitle,
.welcome-step-copy {
  color: var(--color-text-secondary);
  font-size: 1rem;
  line-height: 1.5;
  margin: 0 0 var(--spacing-lg);
  max-width: 420px;
  margin-left: auto;
  margin-right: auto;
}

.welcome-step-title {
  font-size: 1.35rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin: 0 0 var(--spacing-sm);
}

.welcome-actions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-md);
  justify-content: center;
  align-items: center;
  margin-top: var(--spacing-lg);
}

.welcome-actions .welcome-skip {
  color: var(--color-text-secondary);
  font-size: 0.95rem;
}

.welcome-btn-icon {
  margin-right: var(--spacing-xs);
  vertical-align: middle;
  display: inline-block;
}

.welcome-whats-next {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin: var(--spacing-lg) 0 var(--spacing-md);
  letter-spacing: -0.01em;
  text-align: center;
  position: relative;
}

.welcome-whats-next::after {
  content: '';
  display: block;
  width: 40px;
  height: 3px;
  background: var(--color-primary);
  border-radius: 2px;
  margin: var(--spacing-sm) auto 0;
}

.welcome-feature-list {
  width: 100%;
  text-align: left;
  margin: 0 0 var(--spacing-lg);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.welcome-feature-item {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  border-radius: var(--radius-md);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
}

.welcome-feature-icon {
  flex-shrink: 0;
  color: var(--color-primary);
  display: flex;
  align-items: center;
  justify-content: center;
}

.welcome-loading,
.welcome-error {
  margin: var(--spacing-md) 0;
  font-size: 0.95rem;
}

.welcome-error {
  color: var(--color-danger);
}

.welcome-step .form-field {
  text-align: left;
  margin: var(--spacing-md) 0;
  max-width: 320px;
  margin-left: auto;
  margin-right: auto;
}
